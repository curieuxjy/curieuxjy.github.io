---
title: "ğŸ‘©â€ğŸ’»ROS2 joint_state_publiser ë””í´íŠ¸ ë™ì‘ ì œì–´í•˜ê¸°"
toc: true
number-sections: true
date: "2025-06-09"
description: ROS2 ë©”ì„¸ì§€ JointStateì™€ JointTrajectory ë¹„êµ
categories: [ros2, joint, code]
execute:
  freeze: auto
---

ROS2 ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ URDF ê¸°ë°˜ ë¡œë´‡ ëª¨ë¸ ì‹œê°í™” ì‹œ, joint_state_publisher ë…¸ë“œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì •ì˜ëœ ëª¨ë“  ê´€ì ˆì˜ ìœ„ì¹˜ë¥¼ 0ìœ¼ë¡œ í¼ë¸”ë¦¬ì‹œí•©ë‹ˆë‹¤. 
í•˜ì§€ë§Œ ì‹¤ì œ ì„¼ì„œë‚˜ ì™¸ë¶€ ë…¸ë“œì—ì„œ ë“¤ì–´ì˜¤ëŠ” ê´€ì ˆ ìƒíƒœë§Œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œë„ ìˆëŠ”ë°, ë‹¨ìˆœ í† í”½ ë¦¬ë§¤í•‘(remapping)ë§Œìœ¼ë¡œëŠ” ì´ ê¸°ë³¸ ë™ì‘ì„ í•´ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ”:

- publish_default_positions=False + source_list íŒŒë¼ë¯¸í„°ë¥¼ í™œìš©í•œ ë°©ë²•

- ë‹¨ìˆœ remapping ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ë¬¸ì œì 

- publish_default_positions íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš° ëŒ€ì•ˆ

ë“±ì„ ì‚´í´ë³´ë©°, ê°€ì¥ ê¹”ë”í•˜ê²Œ ì™¸ë¶€ JointState ë©”ì‹œì§€ë§Œ ë°˜ì˜í•˜ëŠ” ì„¤ì •ë²•ì„ ìì„¸íˆ ì•Œì•„ë´…ë‹ˆë‹¤.

ë‘ ê°€ì§€ ë°©ì‹ì˜ ì°¨ì´ë¥¼ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

# `publish_default_positions=False` + `source_list` ì‚¬ìš©

```python
Node(
  package='joint_state_publisher',
  executable='joint_state_publisher',
  parameters=[
    {'use_sim_time': False},
    {'publish_default_positions': False},
    {'source_list': ['cmd_joint_states']},
  ],
)
```

* **`publish_default_positions: False`**
  ê¸°ë³¸ì ìœ¼ë¡œ URDFì— ì •ì˜ëœ ëª¨ë“  ê´€ì ˆì„ 0 ìœ„ì¹˜ë¡œ ì°ì–´ì£¼ëŠ” â€œë””í´íŠ¸ í¼ë¸”ë¦¬ì‹œâ€ ê¸°ëŠ¥ì„ êº¼ì¤ë‹ˆë‹¤.
* **`source_list: ['cmd_joint_states']`**
  ì´ ë…¸ë“œê°€ `/cmd_joint_states` ì—ì„œë§Œ ë“¤ì–´ì˜¤ëŠ” `JointState` ë©”ì‹œì§€ë¥¼ êµ¬ë…í•´ì„œ, ê·¸ëŒ€ë¡œ `/sim_joint_states` ë¡œ ë‚´ë³´ë‚´ê²Œ ì§€ì •í•©ë‹ˆë‹¤.
* **ê²°ê³¼**: ì˜¤ì§ ì—¬ëŸ¬ë¶„ì´ ìƒì„±í•œ `/cmd_joint_states` ê´€ì ˆ ê°ë„ë§Œ `/sim_joint_states` ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ 0ê°’ì´ ì„ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.


# ë‹¨ìˆœ Remapping ì‚¬ìš©

```python
Node(
  package='joint_state_publisher',
  executable='joint_state_publisher',
  parameters=[{'use_sim_time': False}],
  remappings=[
    ('sim_joint_states', '/cmd_joint_states'),
  ],
)
```

* **`publish_default_positions` ì„¤ì • ì—†ìŒ**
  ë””í´íŠ¸ 0ê°’ í¼ë¸”ë¦¬ì‹œëŠ” êº¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
* **Remapping**
  ë‚´ë¶€ì ìœ¼ë¡œ êµ¬ë…(`/sim_joint_states`)ê³¼ í¼ë¸”ë¦¬ì‹œ(`/sim_joint_states`)í•˜ë˜ í† í”½ì„ ëª¨ë‘ `/cmd_joint_states` ë¡œ ë°”ê¿”ë²„ë¦½ë‹ˆë‹¤.
* **ê²°ê³¼**:

  1. ì—¬ëŸ¬ë¶„ì˜ Python ë…¸ë“œê°€ ë³´ë‚´ëŠ” ì‹¤ì œ Allegro ê°ë„
  2. joint_state_publisher ê°€ ì„ì–´ë„£ëŠ” URDF ì „ì²´ ê´€ì ˆì˜ 0 ìœ„ì¹˜
    
  * ì´ ë‘˜ì´ ê°™ì€ í† í”½ì— ë’¤ì„ì—¬ ë²„ë ¤, ì›ì¹˜ ì•ŠëŠ” 0ê°’ì´ í•¨ê»˜ í¼ì§‘ë‹ˆë‹¤.

# ê²°ë¡ 

* **ìµœì„ ì˜ ë°©ë²•**ì€ `source_list` íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•˜ëŠ” ROS 2 ë°°í¬íŒì—ì„œ **ë°©ì‹ 1**ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.
* `source_list` ì§€ì›ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ë©´, remapping ë§Œìœ¼ë¡œëŠ” ê¸°ë³¸ 0ê°’ í¼ë¸”ë¦¬ì‹œë¥¼ ëŒ ìˆ˜ ì—†ì–´ ì¶©ëŒì´ ë°œìƒí•˜ë‹ˆ, ê°€ëŠ¥í•œ í•œ joint_state_publisher ì„¤ì • íŒŒë¼ë¯¸í„°ë¡œ â€œë””í´íŠ¸ í¼ë¸”ë¦¬ì‹œ ë„ê¸°â€ë¥¼ í•¨ê»˜ ì§€ì •í•˜ì„¸ìš”.

---

`joint_state_publisher` ë…¸ë“œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ URDFì— ì •ì˜ëœ ëª¨ë“  ê´€ì ˆì— ëŒ€í•´ **ë””í´íŠ¸ ìœ„ì¹˜(0rad)** ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í¼ë¸”ë¦¬ì‹œí•©ë‹ˆë‹¤. 
ì´ ë™ì‘ì„ ë„ë ¤ë©´ ë‹¨ìˆœíˆ í† í”½ì„ ë¦¬ë§¤í•‘(remapping)í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œëŠ” ë¶ˆê°€ëŠ¥í•˜ë©°, `publish_default_positions` íŒŒë¼ë¯¸í„°ë¥¼ `False` ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.

## remappingë§Œìœ¼ë¡œëŠ” ë””í´íŠ¸ í¼ë¸”ë¦¬ì‹œë¥¼ ëŒ ìˆ˜ ì—†ëŠ” ì´ìœ 

* **`publish_default_positions` ê¸°ë³¸ê°’ì´ `True`**

  * `joint_state_publisher` ë¬¸ì„œì— ë”°ë¥´ë©´, íŒŒë¼ë¯¸í„° `publish_default_positions` ì˜ ê¸°ë³¸ê°’ì€ `True` ì´ê³ , ì´ ê²½ìš° â€œì™¸ë¶€ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ë©”ì‹œì§€ê°€ ì—†ìœ¼ë©´ URDFì— ì •ì˜ëœ ëª¨ë“  ê´€ì ˆ ìœ„ì¹˜ë¥¼ ë””í´íŠ¸(0ê°’)ë¡œ í¼ë¸”ë¦¬ì‹œâ€ í•©ë‹ˆë‹¤.
* **ë¦¬ë§¤í•‘(remapping)ë§Œìœ¼ë¡œëŠ” ì´ ë‚´ë¶€ ë™ì‘ì„ ë³€ê²½ ë¶ˆê°€**

  * í† í”½ remapping(`('sim_joint_states', '/cmd_joint_states')` ë“±)ì„ ì ìš©í•´ë„, ë…¸ë“œëŠ” ì—¬ì „íˆ ë‚´ë¶€ì ìœ¼ë¡œ â€œë””í´íŠ¸ ìœ„ì¹˜ í¼ë¸”ë¦¬ì‹œâ€ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
  * ì‹¤ì œ ì‚¬ë¡€ë¡œ, Robotics Stack Exchange ë‹µë³€ì—ì„œë„ â€œ`publish_default_positions` ë¥¼ `False` ë¡œ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ JSPëŠ” (source\_list ìœ ë¬´ì™€ ìƒê´€ì—†ì´) í•­ìƒ ëª¨ë“  ê´€ì ˆì˜ ê°’ì„ í¼ë¸”ë¦¬ì‹œí•œë‹¤â€ ê³  ëª…ì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤.

---

## í•´ê²°ì±…: `publish_default_positions` ì˜µì…˜ ì‚¬ìš©

* **íŒŒë¼ë¯¸í„° ì„¤ì •**

  ```yaml
  publish_default_positions: False
  source_list: ['cmd_joint_states']
  ```

  - ì´ë ‡ê²Œ í•˜ë©´ `/cmd_joint_states` ë¡œë¶€í„°ë§Œ JointState ë©”ì‹œì§€ë¥¼ ë°›ì•„ `/sim_joint_states` ë¡œ ë‚´ë³´ë‚´ë©°, ë””í´íŠ¸(0ê°’) í¼ë¸”ë¦¬ì‹œëŠ” ì™„ì „íˆ ëŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* **ROS 2 ëŸ°ì¹˜ ì˜ˆì‹œ**

  ```python
  Node(
    package='joint_state_publisher',
    executable='joint_state_publisher',
    name='joint_state_publisher',
    output='screen',
    parameters=[
      {'use_sim_time': False},
      {'publish_default_positions': False},
      {'source_list': ['cmd_joint_states']},
    ],
  ),
  ```

ì´ë ‡ê²Œ `publish_default_positions` ë¥¼ `False` ë¡œ ëª…ì‹œì ìœ¼ë¡œ êº¼ì•¼ë§Œ, remappingë§Œìœ¼ë¡œëŠ” ì œì–´í•  ìˆ˜ ì—†ëŠ” ê¸°ë³¸ í¼ë¸”ë¦¬ì‹œ ë™ì‘ì„ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[1]: https://docs.ros.org/en/rolling/p/joint_state_publisher/?utm_source=chatgpt.com "joint_state_publisher 2.4.0 documentation - the official ROS docs"
[2]: https://robotics.stackexchange.com/questions/93267/joint-state-publisher-produces-empty-messages "ros - Joint State Publisher produces empty messages - Robotics Stack Exchange"
