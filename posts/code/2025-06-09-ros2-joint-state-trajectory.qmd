---
title: "ğŸ‘©â€ğŸ’»ROS2 JointState vs. JointTrajectory"
toc: true
number-sections: true
date: "2025-06-09"
description: ROS2 ë©”ì„¸ì§€ JointStateì™€ JointTrajectory ë¹„êµ
categories: [ros2, joint, code]
execute:
  freeze: auto
---

ROSì—ì„œ `sensor_msgs/JointState`ì™€ `trajectory_msgs/JointTrajectory`ëŠ” ëª©ì ê³¼ ì‚¬ìš© ì‹œì ì´ ëšœë ·í•˜ê²Œ ë‹¤ë¦…ë‹ˆë‹¤. 

- https://docs.ros.org/en/noetic/api/sensor_msgs/html/msg/JointState.html
- https://docs.ros.org/en/noetic/api/trajectory_msgs/html/msg/JointTrajectory.html

## ğŸ“Œ ë¹„êµ ìš”ì•½

| ë©”ì‹œì§€ ìœ í˜•                                                  | ëª©ì                                | í•„ë“œ                                                                                                                                           | ì‚¬ìš© ì‹œì                                                                                                  |
| ------------------------------------------------------- | -------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| **JointState** (`sensor_msgs/JointState`)               | í˜„ì¬ ì¡°ì¸íŠ¸ì˜ ìƒíƒœ(ìœ„ì¹˜, ì†ë„, í† í¬ ë“±)ë¥¼ **ë³´ê³ ** | header, joint ì´ë¦„, position\[], velocity\[], effort\[] ([robotics.stackexchange.com][1], [forums.developer.nvidia.com][2], [docs.ros.org][3]) | - ì„¼ì„œë‚˜ ì‹œë®¬ë ˆì´í„°, í•˜ë“œì›¨ì–´ì—ì„œ í”¼ë“œë°± ì œê³µ<br>- `robot_state_publisher`ë‚˜ Rviz ê°™ì€ ìƒíƒœ ì‹œê°í™”<br>- ì œì–´ ë£¨í”„ì—ì„œ í˜„ì¬ ìƒíƒœ ìˆ˜ì‹          |
| **JointTrajectory** (`trajectory_msgs/JointTrajectory`) | ì¡°ì¸íŠ¸ì˜ ëª©í‘œ ê¶¤ì (waypoint ì§‘í•©)ì„ **ëª…ë ¹**  | header, joint\_names\[], points\[] (ê° pointëŠ” positions, velocities, accelerations, efforts, time\_from\_start í¬í•¨)                            | - MoveIt!, ROS ì»¨íŠ¸ë¡¤ëŸ¬(Action ì„œë²„)ë¥¼ í†µí•œ ë¡œë´‡ ë™ì‘ ê³„íš ì‹¤í–‰<br>- ì‹œí€€ì…œí•œ ì¡°ì¸íŠ¸ ëª©í‘œ ì „ë‹¬<br>- `FollowJointTrajectory` ì•¡ì…˜ í˜¸ì¶œ |


## ğŸ”„ ì‚¬ìš© ì˜ˆì‹œì™€ íë¦„

### 1. ìƒíƒœ í”¼ë“œë°±ìš© â€“ `JointState`

* í•˜ë“œì›¨ì–´ë‚˜ Gazebo í”ŒëŸ¬ê·¸ì¸ì´ ì¡°ì¸íŠ¸ ì„¼ì„œ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°œí–‰
* í¼ë¸”ë¦¬ì…” ì˜ˆ: `joint_states` í† í”½
* ì†Œë¹„ì²˜: `robot_state_publisher/JointStatePublisher`, TF ì‹œìŠ¤í…œ, Rviz, ëª¨ë‹ˆí„°ë§ íˆ´ ë“± 

### 2. ê¶¤ì  ëª…ë ¹ìš© â€“ `JointTrajectory`

* MoveIt! ë˜ëŠ” ë‹¤ë¥¸ ê²½ë¡œ ìƒì„±ê¸°ê°€ ê³„íšëœ ì¡°ì¸íŠ¸ ê¶¤ì ì„ ìƒì„±
* ë©”ì‹œì§€ êµ¬ì„± ì˜ˆ: `joint_names` = \[â€œjoint1â€, â€œjoint2â€], `points`ëŠ” ì—¬ëŸ¬ ìŠ¤í…ìœ¼ë¡œ êµ¬ì„±
* ì»¨íŠ¸ë¡¤ëŸ¬ì— ì „ë‹¬: `FollowJointTrajectory` ì•¡ì…˜ ì„œë²„ í˜¸ì¶œ 

### 3. ì œì–´ ì‚¬ì´í´ ë‚´ ìº¡ì²˜

* ê¶¤ì  ì‹¤í–‰ ì¤‘ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” `JointTrajectory` ëª…ë ¹ì„ ë°›ì•„ë“¤ì´ê³ ,
* ì‹¤ì œ í•˜ë“œì›¨ì–´ëŠ” í˜„ì¬ ìƒíƒœë¥¼ ë‹¤ì‹œ `JointState`ë¡œ ë°œí–‰í•˜ì—¬
* í”¼ë“œë°± ë£¨í”„ ë° ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥ (e.g. FollowJointTrajectoryFeedback)

---

## â— ìì£¼ ë¬»ëŠ” ì‹¤ìˆ˜

* `JointState`ë¥¼ **ëª…ë ¹ìš©**ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ **ë°”ëŒì§í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ë‚´ë¶€ ìƒíƒœ ë³´ê³ ìš© ë©”ì‹œì§€ì…ë‹ˆë‹¤
* **ë°˜ëŒ€ë¡œ**, `JointTrajectory`ëŠ” ë‹¨ìˆœ ìƒíƒœ ë³´ê³ ìš©ìœ¼ë¡œëŠ” ì í•©í•˜ì§€ ì•Šìœ¼ë©°, ì‹œê°„ ê¸°ë°˜ waypoint ì „ë‹¬ìš©ì…ë‹ˆë‹¤.
* `JointState`ëŠ” **ì‹œê°„ ì‹œë¦¬ì¦ˆ** ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ë²ˆ ë°œí–‰í•  ìˆ˜ ìˆê³ ,
* `JointTrajectory`ëŠ” **ë‹¨ í•œ ë²ˆ**ì˜ ë©”ì‹œì§€ë¡œ **ì „ ê¶¤ì **ì„ í•¨ê»˜ ì „ë‹¬í•©ë‹ˆë‹¤&#x20;



## âœ… ì–¸ì œ ì–´ë–¤ ë©”ì‹œì§€ë¥¼ ì¨ì•¼ í• ê¹Œ?

* **ì¡°ì¸íŠ¸ì˜ í˜„ ìƒíƒœë¥¼ ì•Œê³  ì‹¶ë‹¤?:** `sensor_msgs/JointState` (pub/sub)
* **ë¡œë´‡ì—ê²Œ íŠ¹ì • ê¶¤ì ì„ ë”°ë¼ ì›€ì§ì´ë¼ê³  ì§€ì‹œí•˜ê³  ì‹¶ë‹¤?:** `trajectory_msgs/JointTrajectory` (ë³´í†µ `FollowJointTrajectory` ì•¡ì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©)


## ğŸ¯ ì •ë¦¬

* **JointState** = â€œì§€ê¸ˆ ë¡œë´‡ ì¡°ì¸íŠ¸ëŠ” ì–´ë”” ìˆëŠ”ê°€?â€
* **JointTrajectory** = â€œì¡°ì¸íŠ¸ë¥¼ ì´ ì‹œê°„ ê³„íš(sequence)ì— ë”°ë¼ ì›€ì§ì—¬ë¼â€


---

ì•„ë˜ì— `JointState`ì™€ `JointTrajectory` ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” **Python/C++ ì½”ë“œ ì˜ˆì œ**ì™€ í•¨ê»˜, ê°ê°ì˜ ì‚¬ìš© ëª©ì ê³¼ ì‹¤í–‰ íë¦„ì„ ì„¤ëª…ë“œë¦´ê²Œìš”.



## `sensor_msgs/JointState` ì˜ˆì œ

â€“ í˜„ì¬ ì¡°ì¸íŠ¸ ìƒíƒœ ë°œí–‰

- âœ”ï¸ Python ì˜ˆì œ (ROS Noetic)

```python
#!/usr/bin/env python
import rospy
:contentReference[oaicite:1]{index=1}

def main():
    :contentReference[oaicite:2]{index=2}
    :contentReference[oaicite:3]{index=3}
    :contentReference[oaicite:4]{index=4}

    js = JointState()
    js.name = ['joint1','joint2']
    js.position = [0.0, 0.0]
    js.velocity = [0.0, 0.0]
    js.effort = [0.0, 0.0]

    angle = 0.0
    while not rospy.is_shutdown():
        angle += 0.01
        js.header.stamp = rospy.Time.now()
        js.position[0] = angle
        js.position[1] = -angle
        pub.publish(js)
        rate.sleep()

:contentReference[oaicite:5]{index=5}
    main()
```

- âœ”ï¸ C++ ì˜ˆì œ

```cpp
#include <ros/ros.h>
#include <sensor_msgs/JointState.h>

:contentReference[oaicite:6]{index=6}
    :contentReference[oaicite:7]{index=7}
    :contentReference[oaicite:8]{index=8}
    :contentReference[oaicite:9]{index=9}
    :contentReference[oaicite:10]{index=10}

    sensor_msgs::JointState js;
    js.name = {"joint1","joint2"};
    js.position = {0.0, 0.0};
    js.velocity = {0.0, 0.0};
    js.effort = {0.0, 0.0};

    double angle = 0.0;
    while (ros::ok()){
        angle += 0.01;
        js.header.stamp = ros::Time::now();
        js.position[0] = angle;
        js.position[1] = -angle;
        pub.publish(js);
        rate.sleep();
    }
    return 0;
}
```

ì´ ì˜ˆì œëŠ” ì£¼ê¸°ì ìœ¼ë¡œ `joint_states` í† í”½ì— í˜„ì¬ ì¡°ì¸íŠ¸ ê°ë„, ì†ë„, í† í¬ë¥¼ ë°œí–‰í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. 
ì´ëŠ” `robot_state_publisher`, Rviz, ë˜ëŠ” ë‹¤ë¥¸ ì†Œë¹„ì ë…¸ë“œì—ì„œ ë¡œë´‡ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê±°ë‚˜ ì‹œê°í™”í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤ ([choreonoid.org][1], [robotics.stackexchange.com][2], [stackoverflow.com][3]).


## `trajectory_msgs/JointTrajectory` ì˜ˆì œ

â€“ ê¶¤ì  ëª©í‘œ ëª…ë ¹ 

- âœ”ï¸ Python ì˜ˆì œ (ROS Noetic)

```python
#!/usr/bin/env python
import rospy
:contentReference[oaicite:12]{index=12}

def main():
    :contentReference[oaicite:13]{index=13}
    :contentReference[oaicite:14]{index=14}
    :contentReference[oaicite:15]{index=15}

    traj = JointTrajectory()
    traj.joint_names = ['joint1','joint2']
    traj.header.stamp = rospy.Time.now()

    pt1 = JointTrajectoryPoint()
    pt1.positions = [0.5, -0.5]
    pt1.time_from_start = rospy.Duration(2.0)
    pt2 = JointTrajectoryPoint()
    pt2.positions = [1.0, -1.0]
    pt2.time_from_start = rospy.Duration(4.0)

    traj.points = [pt1, pt2]
    pub.publish(traj)
    rospy.loginfo("Trajectory sent!")
```

- âœ”ï¸ C++ ì˜ˆì œ

```cpp
#include <ros/ros.h>
#include <trajectory_msgs/JointTrajectory.h>
#include <trajectory_msgs/JointTrajectoryPoint.h>

:contentReference[oaicite:16]{index=16}
    :contentReference[oaicite:17]{index=17}
    :contentReference[oaicite:18]{index=18}
    :contentReference[oaicite:19]{index=19}
    :contentReference[oaicite:20]{index=20}

    trajectory_msgs::JointTrajectory traj;
    traj.joint_names = {"joint1","joint2"};
    traj.header.stamp = ros::Time::now();

    trajectory_msgs::JointTrajectoryPoint pt1, pt2;
    pt1.positions = {0.5, -0.5};
    pt1.time_from_start = ros::Duration(2.0);
    pt2.positions = {1.0, -1.0};
    pt2.time_from_start = ros::Duration(4.0);

    traj.points = {pt1, pt2};
    pub.publish(traj);
    ROS_INFO("Published trajectory");
    return 0;
}
```

ì´ ì˜ˆì‹œëŠ” `FollowJointTrajectory` ìŠ¤íƒ€ì¼ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì¡°ì¸íŠ¸ ê¶¤ì ì„ í•œë²ˆì— ì „ë‹¬í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤. 
ê° í¬ì¸íŠ¸ëŠ” ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì¡°ì¸íŠ¸ ëª©í‘œ ìœ„ì¹˜ë¥¼ ë‹´ê³  ìˆì–´, ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì´ë¥¼ ë”°ë¼ê°€ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. `joint_names` ê¸¸ì´ëŠ” í¬ì¸íŠ¸ í•˜ë‚˜ì— í¬í•¨ëœ position ë°°ì—´ì˜ ê¸¸ì´ì™€ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤ ([robotics.stackexchange.com][4], [choreonoid.org][5], [stackoverflow.com][3]).



- ğŸ¥ ì¶”ì²œ ì˜ìƒ â€“ `JointTrajectory` ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€

[Joint trajectory controller in ROS with Python and RRRbot](https://www.youtube.com/watch?v=BmLdjLNJHoY)

ìœ„ ì˜ìƒì€ ì‹¤ì œ ë¡œë´‡ íŒ”ì— `JointTrajectory` ë©”ì‹œì§€ë¥¼ ëª…ë ¹í•˜ì—¬ ë™ì‘ì‹œí‚¤ëŠ” ê³¼ì •ì„ ì˜ ë³´ì—¬ì¤ë‹ˆë‹¤. ì‹œì‘ë¶€í„° ì‹¤í–‰ íë¦„ê³¼ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ì˜ í†µì‹ ì„ í™•ì¸í•˜ê¸°ì— ì¢‹ìŠµë‹ˆë‹¤.


## ğŸ“Œ íë¦„ ìš”ì•½

1. í˜„ì¬ ìƒíƒœê°€ í•„ìš”í•  ë•Œ â†’ `sensor_msgs/JointState`ë¡œ ìƒíƒœ ë°œí–‰
2. ë¡œë´‡ì„ ì›€ì§ì´ê³  ì‹¶ì„ ë•Œ â†’ `trajectory_msgs/JointTrajectory`ë¡œ ê¶¤ì  ê³„íš ì „ë‹¬
3. ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ê¶¤ì ì„ ì½ê³  ì•¡ì¶”ì—ì´í„°ë¡œ ë³€í™˜í•˜ë©°, ì‹¤í–‰ ì¤‘ `JointState`ë¡œ í”¼ë“œë°± ì œê³µ

ì´ êµ¬ì„±ì€ ë¡œë´‡ ì œì–´ê³„ì—ì„œ **í”¼ë“œë°± ë£¨í”„**ì™€ **ëª…ë ¹ ë£¨í”„**ë¥¼ **ë¶„ë¦¬**í•˜ì—¬ ì•ˆì •ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. 

# Reference

- ["error while publishing trajectory_msgs/jointtrajectory msgs"](https://robotics.stackexchange.com/questions/27991/error-while-publishing-trajectory-msgs-jointtrajectory-msgs)
- ["ROS Joint State with velocity and position control - Isaac Sim"](https://forums.developer.nvidia.com/t/ros-joint-state-with-velocity-and-position-control/214882)
- ["sensor_msgs/JointState Documentation - the official ROS docs"](https://docs.ros.org/jade/api/sensor_msgs/html/msg/JointState.html)
- ["Robot State Publisher vs. Joint State Publisher - Automatic Addison"](https://automaticaddison.com/robot-state-publisher-vs-joint-state-publisher/)
- ["Follow Joint Trajectory Commands - Stretch Documentation"](https://docs.hello-robot.com/0.2/stretch-tutorials/ros2/follow_joint_trajectory/)
- ["How to plot trajectory_msgs/JointTrajectory? - ROS Answers archive"](https://answers.ros.org/question/412640/)
- ["How to subscribe trajectory_msgs/JointTrajectory and publish ..."](https://answers.ros.org/question/289287)
- ["Step 2: Publish the JointState topic to output the state of Tank"](https://choreonoid.org/en/documents/latest/ros/tank-tutorial/step2.html)
- ["How to write my own joint state - ros - Robotics Stack Exchange"](https://robotics.stackexchange.com/questions/84007/how-to-write-my-own-joint-state)
- ["publishing trajectory_msgs/jointtrajectory msgs - ros - Stack Overflow"](https://stackoverflow.com/questions/41411217/publishing-trajectory-msgs-jointtrajectory-msgs)
- ["Understanding trajectory_msgs/JointTrajectory"](https://robotics.stackexchange.com/questions/48217/understanding-trajectory-msgs-jointtrajectory)
- ["Step 3: Subscribe to the JointState topic to display the state of Tank"](https://choreonoid.org/en/documents/latest/ros/tank-tutorial/step3.html)
