---
title: "π“ROS2 bag μ‚¬μ©"
toc: true
date: "2025-10-01"
description: Note
categories: [ros2, bag, 2025]
format:
  html:
    code-fold: true
    code-summary: "Show the code"
---


# κΈ°λ³Έ μ¤€λΉ„

1. μƒ ν„°λ―Έλ„λ§λ‹¤ ROS 2 ν™κ²½μ„ **source** ν•©λ‹λ‹¤:
   `source /opt/ros/<ROS_DISTRO>/setup.bash`
2. κΈ°λ΅ν•  ν† ν”½ λ©λ΅ ν™•μΈ:
   `ros2 topic list` (ν† ν”½μ΄ μ‹¤μ λ΅ publish λλ”μ§€ `ros2 topic echo /ν† ν”½λ…`μΌλ΅ ν™•μΈ). ([ROS Documentation][1])


# 1) νΉμ • ν† ν”½ ν• κ° λ…Ήν™”

```bash
# μ: /turtle1/cmd_vel ν† ν”½ λ…Ήν™”
ros2 bag record /turtle1/cmd_vel
```

λ…Ήν™” μ¤‘μ§€: `Ctrl+C`. κΈ°λ΅λ bagμ€ μ‹¤ν–‰ν• λ””λ ‰ν† λ¦¬ μ•μ— `rosbag2_<timestamp>` κ°™μ€ ν΄λ”λ΅ μƒμ„±λ©λ‹λ‹¤. ([ROS Documentation][1])


# 2) μ—¬λ¬ ν† ν”½ λ…Ήν™” & μ¶λ ¥ μ΄λ¦„ μ§€μ •

```bash
# μ—¬λ¬ ν† ν”½μ„ κ³µλ°±μΌλ΅ λ‚μ—΄. -oλ΅ output μ΄λ¦„ μ§€μ •
ros2 bag record -o myrun /topic1 /topic2 /topic3
```

μ„ λ…λ Ήμ€ `myrun`μ΄λΌλ” μ΄λ¦„μ bag(λ””λ ‰ν† λ¦¬/νμΌ)μ„ λ§λ“­λ‹λ‹¤. ([ROS Documentation][1])

# 3) μ‹μ¤ν…μ λ¨λ“  ν† ν”½ λ…Ήν™”

```bash
# λ¨λ“  ν† ν”½ λ…Ήν™”
ros2 bag record -a
# λλ” μ΄λ¦„ μ§€μ •
ros2 bag record -a -o all_topics_run
```

λ§μ€ ν† ν”½/λ°μ΄ν„°κ°€ μμ•„μ Έ λ“¤μ–΄μ¤λ―€λ΅ λ””μ¤ν¬ μ‚¬μ©λ‰μ— μ£Όμν•μ„Έμ”. ([ROS Documentation][1])

# 4) μ μ™Έ(ν•„ν„°) β€” μ •κ·ν‘ν„μ‹μΌλ΅ μ μ™Έν•κΈ°

λ¨λ“  ν† ν”½μ„ λ…Ήν™”ν•λ©΄μ„ μΌλ¶€ ν† ν”½λ§ μ μ™Έν•λ ¤λ©΄ μ •κ·ν‘ν„μ‹ μµμ…μ„ μ‚¬μ©ν•©λ‹λ‹¤(λ²„μ „λ³„ μ΄λ¦„μ΄ μ•½κ°„ λ‹¤λ¦„: `--exclude-regex` λ“±). μ:

```bash
# μ: /tf.* ν† ν”½μ€ μ μ™Έν•κ³  λ…Ήν™”
ros2 bag record -a -x "/tf.*"
# λλ” --exclude-regex μ‚¬μ©(ROS λ²„μ „μ— λ”°λΌ μ΄λ¦„/λ™μ‘μ΄ λ°”λ€” μ μμ)
ros2 bag record -a --exclude-regex "/tf.*"
```

μ°Έκ³ : μµμ…λ…κ³Ό λ™μ‘(μ: `-x` vs `--exclude-regex`)μ€ ROS 2 λ²„μ „(λ‹¨μΌ λ°°ν¬ν)μ—μ„ λ°”λ€ μ μ΄ μμΌλ‹, `ros2 bag --help`λ΅ λ΅μ»¬ μµμ…μ„ ν™•μΈν•μ„Έμ”. (Jazzy λ“± μµμ‹  λ¦΄λ¦¬μ¤μ—μ„ `--exclude` β†’ `--exclude-regex`λ΅ λ³€κ²½λ μ‚¬λ΅€κ°€ μμµλ‹λ‹¤). ([ROS Documentation][2])

# 5) μ••μ¶• μ €μ¥(μ €μ¥ ν¬λ§·, μ„±λ¥)

rosbag2λ” κΈ°λ³Έ μ €μ¥ ν¬λ§·(μ: MCAP / sqlite)κ³Ό **μ••μ¶• μµμ…**μ„ μ κ³µν•©λ‹λ‹¤. μ:

```bash
# zstd νμΌ λ‹¨μ„ μ••μ¶•μΌλ΅ λ¨λ“  ν† ν”½ λ…Ήν™”
ros2 bag record -a --compression-mode file --compression-format zstd -o myrun_zstd
```

MCAPκ°€ ROS 2μ κΈ°λ³Έ/κ¶μ¥ ν¬λ§·μΌλ΅ λ„μ…λμ–΄ μ™Έλ¶€ ν΄ μ—°λ™μ„±(μ: Foxglove)μ—μ„ μ λ¦¬ν• κ²½μ°κ°€ μμµλ‹λ‹¤. μ••μ¶•μ„ μ‚¬μ©ν•λ©΄ λ””μ¤ν¬ μ‚¬μ©λ‰μ„ ν¬κ² μ¤„μΌ μ μμΌλ‚ CPU μ‚¬μ©λ‰μ΄ λμ–΄λ‚©λ‹λ‹¤. ([GitHub][3])


# 6) λ…Ήν™”ν• bag μ •λ³΄ λ³΄κΈ° / μ¬μƒ

* μ •λ³΄ ν™•μΈ:
  `ros2 bag info <bag_name>`
* μ¬μƒ(νΌλΈ”λ¦¬μ‹):
  `ros2 bag play <bag_name>`
  μ: `ros2 bag play myrun` β€” ν”λ μ΄ν•λ©΄ λ…Ήν™”ν• λ©”μ‹μ§€λ“¤μ΄ λ‹¤μ‹ νΌλΈ”λ¦¬μ‹λ©λ‹λ‹¤. ([ROS Documentation][1])

# 7) μμ£Ό κ²λ” λ¬Έμ μ™€ ν•΄κ²° ν

* **ν† ν”½μ΄ λ…Ήν™”λμ§€ μ•μ„ λ•**: ν•΄λ‹Ή ν† ν”½μ΄ μ‹¤μ λ΅ publish μ¤‘μΈμ§€(`ros2 topic echo`) ν™•μΈ.
* **QoS νΈν™μ„± λ¬Έμ **: ROS 2λ” QoS(μ‹ λΆ°μ„± λ“±) νΈν™μ„± μ”κµ¬κ°€ μμ–΄, λ…Ήν™”(κµ¬λ…)κ°€ μ‹¤ν¨ν•  μ μμµλ‹λ‹¤. ν•„μ”ν•λ©΄ QoS μ¤λ²„λΌμ΄λ“ μµμ…μ΄λ‚ λ¬Έμ„λ¥Ό μ°Έμ΅°ν•μ„Έμ”. ([ROS Documentation][1])
* **λ²„μ „ μ°¨μ΄**: `ros2 bag`μ μµμ…λ…(`-x`, `--exclude-regex`, μ••μ¶• μµμ… λ“±)μ€ ROS 2 λ°°ν¬ν(humble, jazzy, rolling λ“±)μ— λ”°λΌ λ‹¬λΌμ§ μ μμµλ‹λ‹¤. λ΅μ»¬μ—μ„ `ros2 bag --help`λ΅ μ‹¤μ  μ‚¬μ© κ°€λ¥ν• μµμ…μ„ ν™•μΈν•μ„Έμ”. ([ROS Documentation][2])
* **λ””μ¤ν¬ μ©λ‰**: κ³ μ£Όν ν† ν”½(μ: μΉ΄λ©”λΌ, λΌμ΄λ‹¤)μ„ λ…Ήν™”ν•λ©΄ κΈλ°© λ””μ¤ν¬λ¥Ό μ΅μ•„λ¨Ήμµλ‹λ‹¤. μΉ΄λ©”λΌλ” ν•΄μƒλ„/μ£Όνμλ¥Ό λ‚®μ¶”κ±°λ‚ μ••μ¶•μ„ μ κ·Ή μ‚¬μ©ν•μ„Έμ”. ([GitHub][3])


# 8) λΉ λ¥Έ μμ  λ¨μ (λ³µμ‚¬ν•΄μ„ μ“°κΈ°)

```bash
# 1) νΉμ • ν† ν”½ 1κ°
ros2 bag record /my_robot/joint_states

# 2) μ—¬λ¬ ν† ν”½ + μ΄λ¦„μ§€μ •
ros2 bag record -o exp1 /tf /odom /scan /camera/image_raw

# 3) λ¨λ“  ν† ν”½(μ΄λ¦„ μ§€μ •) + zstd μ••μ¶•
ros2 bag record -a -o allrun --compression-mode file --compression-format zstd

# 4) λ¨λ“  ν† ν”½ λ…Ήν™”ν•λ /tf.* μ μ™Έ
ros2 bag record -a -x "/tf.*" -o all_except_tf
```


[1]: https://docs.ros.org/en/foxy/Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html "Recording and playing back data β€” ROS 2 Documentation: Foxy  documentation"
[2]: https://docs.ros.org/en/jazzy/Releases/Release-Jazzy-Jalisco.html?utm_source=chatgpt.com "Jazzy Jalisco (jazzy) β€” ROS 2 Documentation"
[3]: https://github.com/ros2/rosbag2?utm_source=chatgpt.com "ros2/rosbag2"
