<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-07-11">
<meta name="description" content="DH íŒŒë¼ë¯¸í„° ë²—ì–´ë‚˜ì„œ PoEë¡œ ê¸°êµ¬í•™ ë‹¤ë¤„ë³´ê¸°">

<title>ğŸ‘©â€ğŸ’»ìŠ¤í¬ë£¨-ì´ë¡  ê¸°ë°˜ Product-of-Exponentials(PoE) ê¸°êµ¬í•™ Deep-Dive â€“ Curieux.JY</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../profile.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-2NVZN2MJZT"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-2NVZN2MJZT', { 'anonymize_ip': true});
</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Curieux.JY</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../post.html"> 
<span class="menu-text">Post</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../note.html"> 
<span class="menu-text">Note</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Jung Yeon Lee</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/curieuxjy"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#ì™œ-poeì¸ê°€-dh-ëª¨ë¸ê³¼ì˜-êµ¬ì¡°ì -ë¹„êµ" id="toc-ì™œ-poeì¸ê°€-dh-ëª¨ë¸ê³¼ì˜-êµ¬ì¡°ì -ë¹„êµ" class="nav-link active" data-scroll-target="#ì™œ-poeì¸ê°€-dh-ëª¨ë¸ê³¼ì˜-êµ¬ì¡°ì -ë¹„êµ">1&nbsp;&nbsp;ì™œ PoEì¸ê°€? â€” DH ëª¨ë¸ê³¼ì˜ êµ¬ì¡°ì  ë¹„êµ</a></li>
  <li><a href="#ìˆ˜í•™-ê¸°ì´ˆ-se3ìŠ¤í¬ë£¨ì§€ìˆ˜ë§µ" id="toc-ìˆ˜í•™-ê¸°ì´ˆ-se3ìŠ¤í¬ë£¨ì§€ìˆ˜ë§µ" class="nav-link" data-scroll-target="#ìˆ˜í•™-ê¸°ì´ˆ-se3ìŠ¤í¬ë£¨ì§€ìˆ˜ë§µ">2&nbsp;&nbsp;ìˆ˜í•™ ê¸°ì´ˆ â€”&nbsp;SE(3)Â·ìŠ¤í¬ë£¨Â·ì§€ìˆ˜ë§µ</a>
  <ul class="collapse">
  <li><a href="#se3-ì •ì˜-ë°-ê¸°í•˜ì -ì˜ë¯¸" id="toc-se3-ì •ì˜-ë°-ê¸°í•˜ì -ì˜ë¯¸" class="nav-link" data-scroll-target="#se3-ì •ì˜-ë°-ê¸°í•˜ì -ì˜ë¯¸">2.1&nbsp;&nbsp;SE(3)&nbsp;ì •ì˜ ë° ê¸°í•˜ì  ì˜ë¯¸</a></li>
  <li><a href="#ìŠ¤í¬ë£¨-ë²¡í„°-xiomegav" id="toc-ìŠ¤í¬ë£¨-ë²¡í„°-xiomegav" class="nav-link" data-scroll-target="#ìŠ¤í¬ë£¨-ë²¡í„°-xiomegav">2.2&nbsp;&nbsp;ìŠ¤í¬ë£¨ ë²¡í„° <span class="math inline">\xi=[\omega;v]</span></a></li>
  <li><a href="#rodrigues-ì§€ìˆ˜ë§µ" id="toc-rodrigues-ì§€ìˆ˜ë§µ" class="nav-link" data-scroll-target="#rodrigues-ì§€ìˆ˜ë§µ">2.3&nbsp;&nbsp;Rodrigues ì§€ìˆ˜ë§µ</a></li>
  </ul></li>
  <li><a href="#poe-ì „ë°©ê¸°êµ¬í•™-pinocchio-ì‹¤ë¬´-ì ˆì°¨" id="toc-poe-ì „ë°©ê¸°êµ¬í•™-pinocchio-ì‹¤ë¬´-ì ˆì°¨" class="nav-link" data-scroll-target="#poe-ì „ë°©ê¸°êµ¬í•™-pinocchio-ì‹¤ë¬´-ì ˆì°¨">3&nbsp;&nbsp;PoE ì „ë°©ê¸°êµ¬í•™ â€” Pinocchio ì‹¤ë¬´ ì ˆì°¨</a>
  <ul class="collapse">
  <li><a href="#ìŠ¤í¬ë£¨-í–‰ë ¬-s-ìë™-ì¶”ì¶œ" id="toc-ìŠ¤í¬ë£¨-í–‰ë ¬-s-ìë™-ì¶”ì¶œ" class="nav-link" data-scroll-target="#ìŠ¤í¬ë£¨-í–‰ë ¬-s-ìë™-ì¶”ì¶œ">3.1&nbsp;&nbsp;ìŠ¤í¬ë£¨ í–‰ë ¬ <strong>S</strong> ìë™ ì¶”ì¶œ</a></li>
  <li><a href="#í™ˆ-í¬ì¦ˆ-m-ì¶”ì¶œ" id="toc-í™ˆ-í¬ì¦ˆ-m-ì¶”ì¶œ" class="nav-link" data-scroll-target="#í™ˆ-í¬ì¦ˆ-m-ì¶”ì¶œ">3.2&nbsp;&nbsp;í™ˆ í¬ì¦ˆ <strong>M</strong> ì¶”ì¶œ</a></li>
  <li><a href="#numpy-poe-fk-í•¨ìˆ˜" id="toc-numpy-poe-fk-í•¨ìˆ˜" class="nav-link" data-scroll-target="#numpy-poe-fk-í•¨ìˆ˜">3.3&nbsp;&nbsp;NumPy&nbsp;PoE FK í•¨ìˆ˜</a></li>
  <li><a href="#pinocchio-fkì™€-ì¼ì¹˜ì„±-ê²€ì¦" id="toc-pinocchio-fkì™€-ì¼ì¹˜ì„±-ê²€ì¦" class="nav-link" data-scroll-target="#pinocchio-fkì™€-ì¼ì¹˜ì„±-ê²€ì¦">3.4&nbsp;&nbsp;Pinocchio FKì™€ ì¼ì¹˜ì„± ê²€ì¦</a></li>
  </ul></li>
  <li><a href="#jacobians-adjoint-ê¸°ë°˜-ê³„ì‚°-pinocchio-ë¹„êµ" id="toc-jacobians-adjoint-ê¸°ë°˜-ê³„ì‚°-pinocchio-ë¹„êµ" class="nav-link" data-scroll-target="#jacobians-adjoint-ê¸°ë°˜-ê³„ì‚°-pinocchio-ë¹„êµ">4&nbsp;&nbsp;Jacobians â€” Adjoint ê¸°ë°˜ ê³„ì‚° &amp; Pinocchio ë¹„êµ</a>
  <ul class="collapse">
  <li><a href="#adjoint-ì—°ì‚°ì˜-ê¸°í•˜ì -ì˜ë¯¸" id="toc-adjoint-ì—°ì‚°ì˜-ê¸°í•˜ì -ì˜ë¯¸" class="nav-link" data-scroll-target="#adjoint-ì—°ì‚°ì˜-ê¸°í•˜ì -ì˜ë¯¸">4.1&nbsp;&nbsp;Adjoint ì—°ì‚°ì˜ ê¸°í•˜ì  ì˜ë¯¸</a></li>
  <li><a href="#ê³µê°„-jacobian-êµ¬í˜„" id="toc-ê³µê°„-jacobian-êµ¬í˜„" class="nav-link" data-scroll-target="#ê³µê°„-jacobian-êµ¬í˜„">4.2&nbsp;&nbsp;ê³µê°„ Jacobian êµ¬í˜„</a></li>
  <li><a href="#pinocchio-jacobianê³¼-ê²€ì¦" id="toc-pinocchio-jacobianê³¼-ê²€ì¦" class="nav-link" data-scroll-target="#pinocchio-jacobianê³¼-ê²€ì¦">4.3&nbsp;&nbsp;Pinocchio Jacobianê³¼ ê²€ì¦</a></li>
  <li><a href="#ë°”ë””-jacobian-ë³€í™˜" id="toc-ë°”ë””-jacobian-ë³€í™˜" class="nav-link" data-scroll-target="#ë°”ë””-jacobian-ë³€í™˜">4.4&nbsp;&nbsp;ë°”ë”” Jacobian ë³€í™˜</a></li>
  </ul></li>
  <li><a href="#casadi-codegen-ë”¥ëŸ¬ë‹-ì—°ë™" id="toc-casadi-codegen-ë”¥ëŸ¬ë‹-ì—°ë™" class="nav-link" data-scroll-target="#casadi-codegen-ë”¥ëŸ¬ë‹-ì—°ë™">5&nbsp;&nbsp;CasADi CodeGen â†’ ë”¥ëŸ¬ë‹ ì—°ë™</a>
  <ul class="collapse">
  <li><a href="#c-ì½”ë“œ-ìë™-ìƒì„±-floatdouble-ì „í™˜-ì§€ì›" id="toc-c-ì½”ë“œ-ìë™-ìƒì„±-floatdouble-ì „í™˜-ì§€ì›" class="nav-link" data-scroll-target="#c-ì½”ë“œ-ìë™-ìƒì„±-floatdouble-ì „í™˜-ì§€ì›">5.1&nbsp;&nbsp;C ì½”ë“œ ìë™ ìƒì„± (float/double ì „í™˜ ì§€ì›)</a></li>
  <li><a href="#pytorch-custom-autograd-ì—°ë™-gpu-í˜¸í™˜" id="toc-pytorch-custom-autograd-ì—°ë™-gpu-í˜¸í™˜" class="nav-link" data-scroll-target="#pytorch-custom-autograd-ì—°ë™-gpu-í˜¸í™˜">5.2&nbsp;&nbsp;PyTorch Custom&nbsp;Autograd ì—°ë™ (GPU í˜¸í™˜)</a></li>
  </ul></li>
  <li><a href="#í˜„ì—…-tips-ì ì¬ì -í•¨ì •" id="toc-í˜„ì—…-tips-ì ì¬ì -í•¨ì •" class="nav-link" data-scroll-target="#í˜„ì—…-tips-ì ì¬ì -í•¨ì •">6&nbsp;&nbsp;í˜„ì—… Tips &amp; ì ì¬ì  í•¨ì •</a></li>
  <li><a href="#ë§ºìŒë§" id="toc-ë§ºìŒë§" class="nav-link" data-scroll-target="#ë§ºìŒë§">ë§ºìŒë§</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ğŸ‘©â€ğŸ’»ìŠ¤í¬ë£¨-ì´ë¡  ê¸°ë°˜ Product-of-Exponentials(PoE) ê¸°êµ¬í•™ Deep-Dive</h1>
  <div class="quarto-categories">
    <div class="quarto-category">poe</div>
    <div class="quarto-category">fk</div>
    <div class="quarto-category">code</div>
  </div>
  </div>

<div>
  <div class="description">
    DH íŒŒë¼ë¯¸í„° ë²—ì–´ë‚˜ì„œ PoEë¡œ ê¸°êµ¬í•™ ë‹¤ë¤„ë³´ê¸°
  </div>
</div>


<div class="quarto-title-meta column-page-left">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 11, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<blockquote class="blockquote">
<p><strong>Executive Summary</strong> <strong>PoE ê¸°êµ¬í•™</strong>ì€ ê´€ì ˆ ìŠ¤í¬ë£¨ <span class="math inline">\xi</span>ì™€ <strong>í™ˆ í¬ì¦ˆ</strong> <span class="math inline">M</span>ë§Œìœ¼ë¡œ ì „Â·ì—­ê¸°êµ¬í•™, Jacobian, ë™ì—­í•™ì„ ìœ ê¸°ì ìœ¼ë¡œ ì„œìˆ í•œë‹¤. ì¢Œí‘œê³„ ì„ íƒì— ì˜ì¡´ì ì¸ <strong>DH íŒ¨ëŸ¬ë‹¤ì„</strong>ì„ ë²—ì–´ë‚˜ <strong><span class="math inline">C^1</span> ì—°ì†</strong>Â·<strong>ì¢Œí‘œê³„ ë¶ˆë³€</strong> íŒŒë¼ë¯¸í„°í™”ë¥¼ ì œê³µí•˜ë¯€ë¡œ <strong>ëª¨ë¸ ë³´ì •Â·ë”¥ëŸ¬ë‹Â·ê³ ì† ì œì–´</strong> í™˜ê²½ì—ì„œ ë›°ì–´ë‚œ ìˆ˜ë ´ íŠ¹ì„±ì„ ë°œíœ˜í•œë‹¤.</p>
</blockquote>
<hr>
<section id="ì™œ-poeì¸ê°€-dh-ëª¨ë¸ê³¼ì˜-êµ¬ì¡°ì -ë¹„êµ" class="level2">
<h2 class="anchored" data-anchor-id="ì™œ-poeì¸ê°€-dh-ëª¨ë¸ê³¼ì˜-êµ¬ì¡°ì -ë¹„êµ">1&nbsp;&nbsp;ì™œ PoEì¸ê°€? â€” DH ëª¨ë¸ê³¼ì˜ êµ¬ì¡°ì  ë¹„êµ</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 13%">
<col style="width: 25%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">&nbsp;êµ¬ë¶„&nbsp;</th>
<th style="text-align: left;">Classic / Modified&nbsp;DH</th>
<th style="text-align: left;"><strong>PoE (Lie ê¸°ë°˜)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>íŒŒë¼ë¯¸í„° ê°œìˆ˜</strong></td>
<td style="text-align: left;">ë§í¬ë‹¹ <code>(Î±, a, d, Î¸â‚€)</code> 4ê°œ</td>
<td style="text-align: left;">Revoluteë‹¹&nbsp;6()&nbsp;+&nbsp;M(6)&nbsp;(ì „ì—­ 1ê°œ)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>í•„ìš” í”„ë ˆì„ ìˆ˜</strong></td>
<td style="text-align: left;">ë§í¬ë§ˆë‹¤ ì¢Œí‘œê³„ ì§€ì •</td>
<td style="text-align: left;">Base&nbsp;+&nbsp;Tool 2ê°œë©´ ì¶©ë¶„</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>íŒŒë¼ë¯¸í„° ì—°ì†ì„±</strong></td>
<td style="text-align: left;">Â±Ï€ ê²½ê³„ì—ì„œ ë¶ˆì—°ì†</td>
<td style="text-align: left;">ìŠ¤í¬ë£¨ <span class="math inline">(\mathbb S^2!\times!\mathbb R^3)</span>, <span class="math inline">C^1</span>&nbsp;ì—°ì†</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>í•™ìŠµÂ·ë³´ì • ìˆ˜ë ´</strong></td>
<td style="text-align: left;">ë¹„í‰í™œ â†’&nbsp;LM ë¶ˆì•ˆì •</td>
<td style="text-align: left;">GDÂ·LM ëª¨ë‘ ìš°ìˆ˜ ìˆ˜ë ´</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>ìˆ˜í•™ì  ê¸°ë°˜</strong></td>
<td style="text-align: left;">ìœ í´ë¦¬ë“œ&nbsp;+&nbsp;adâ€‘hoc</td>
<td style="text-align: left;">Lie&nbsp;êµ°&nbsp;SE(3)&nbsp;+&nbsp;ìŠ¤í¬ë£¨ ì´ë¡ </td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ì§ê´€ì  ì˜ˆì‹œ
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>ë¹„í‹€ë¦¼ê° Î±&nbsp;=&nbsp;Â±Ï€&nbsp;ê²½ê³„</strong>ë¥¼ ì§€ë‚˜ëŠ” 2â€‘ë§í¬ í‰ë©´ ë¡œë´‡ì„ ìƒê°í•´ ë³´ì. DH ë°©ì‹ì—ì„œëŠ” Î± ê°’ì´ +Ï€â†’â€“Ï€ë¡œ ìˆœê°„ ì í”„í•˜ë©° Jacobianì´ ë¶ˆì—°ì†ì´ ëœë‹¤. PoEëŠ” ë™ì¼ ì¶•ì„ <strong>ë‹¨ì¼ ìŠ¤í¬ë£¨</strong>ë¡œ í‘œí˜„í•˜ë¯€ë¡œ ê²½ê³„ê°€ ì‚¬ë¼ì§„ë‹¤.</p>
</div>
</div>
<hr>
</section>
<section id="ìˆ˜í•™-ê¸°ì´ˆ-se3ìŠ¤í¬ë£¨ì§€ìˆ˜ë§µ" class="level2">
<h2 class="anchored" data-anchor-id="ìˆ˜í•™-ê¸°ì´ˆ-se3ìŠ¤í¬ë£¨ì§€ìˆ˜ë§µ">2&nbsp;&nbsp;ìˆ˜í•™ ê¸°ì´ˆ â€”&nbsp;SE(3)Â·ìŠ¤í¬ë£¨Â·ì§€ìˆ˜ë§µ</h2>
<section id="se3-ì •ì˜-ë°-ê¸°í•˜ì -ì˜ë¯¸" class="level3">
<h3 class="anchored" data-anchor-id="se3-ì •ì˜-ë°-ê¸°í•˜ì -ì˜ë¯¸">2.1&nbsp;&nbsp;SE(3)&nbsp;ì •ì˜ ë° ê¸°í•˜ì  ì˜ë¯¸</h3>
<p><span class="math display">
T = \begin{bmatrix} R &amp; p \\ 0 &amp; 1 \end{bmatrix},\qquad R \in SO(3),\; p \in \mathbb R^3
</span></p>
<p>â†’&nbsp;<strong>íšŒì „</strong> <span class="math inline">R</span>ê³¼ <strong>ë³‘ì§„</strong> <span class="math inline">p</span>ë¥¼ ë™ì‹œì— ë‚˜íƒ€ë‚´ëŠ” 4Ã—4&nbsp;ë³€í™˜ í–‰ë ¬.</p>
</section>
<section id="ìŠ¤í¬ë£¨-ë²¡í„°-xiomegav" class="level3">
<h3 class="anchored" data-anchor-id="ìŠ¤í¬ë£¨-ë²¡í„°-xiomegav">2.2&nbsp;&nbsp;ìŠ¤í¬ë£¨ ë²¡í„° <span class="math inline">\xi=[\omega;v]</span></h3>
<ul>
<li><strong>Revolute ê´€ì ˆ</strong>: <span class="math inline">|\omega|=1</span>,&nbsp; <span class="math inline">v=-\omega\times q</span> (ì¶•ì„ ì§€ë‚˜ëŠ” ì &nbsp;<span class="math inline">q</span>ì—ì„œ ì†ë„ê°€ 0ì´ ë˜ë„ë¡ <span class="math inline">v</span> ê²°ì •)</li>
<li><strong>Prismatic ê´€ì ˆ</strong>: <span class="math inline">\omega=0</span>,&nbsp; <span class="math inline">v</span>ê°€ ì´ë™ ì¶• ë‹¨ìœ„ë²¡í„°.</li>
</ul>
<p>ìŠ¤í¬ë£¨ëŠ” <strong>ë‚˜ì‚¬ ìš´ë™</strong>ì„ ì¼ë°˜í™”í•œ ê°œë…ìœ¼ë¡œ, <span class="math inline">\omega</span>ê°€ â€œë‚˜ì‚¬ ì¶•â€, <span class="math inline">v</span>ê°€ â€œë‚˜ì‚¬ í”¼ì¹˜â€ì— ëŒ€ì‘í•œë‹¤.</p>
</section>
<section id="rodrigues-ì§€ìˆ˜ë§µ" class="level3">
<h3 class="anchored" data-anchor-id="rodrigues-ì§€ìˆ˜ë§µ">2.3&nbsp;&nbsp;Rodrigues ì§€ìˆ˜ë§µ</h3>
<p><span class="math display">
\exp(\widehat\omega\,\theta)=I+\sin\theta\,\widehat\omega+(1-\cos\theta)\,\widehat\omega^2
</span></p>
<p>ë³‘ì§„ í•­(í•´ì„ì  ì ë¶„)</p>
<p><span class="math display">
J(\theta)=I\theta+(1-\cos\theta)\widehat\omega+(\theta-\sin\theta)\widehat\omega^2,\quad p=J(\theta)\,v.
</span></p>
<blockquote class="blockquote">
<p><span class="math inline">\widehat\omega</span>ëŠ” <span class="math inline">\omega</span>ë¥¼ ìŠ¤íâ€‘ëŒ€ì¹­ í–‰ë ¬ë¡œ ì‚½ì…í•œ Lie&nbsp;ëŒ€ìˆ˜&nbsp;<span class="math inline">\mathfrak{so}(3)</span>&nbsp;å…ƒ.</p>
</blockquote>
<hr>
</section>
</section>
<section id="poe-ì „ë°©ê¸°êµ¬í•™-pinocchio-ì‹¤ë¬´-ì ˆì°¨" class="level2">
<h2 class="anchored" data-anchor-id="poe-ì „ë°©ê¸°êµ¬í•™-pinocchio-ì‹¤ë¬´-ì ˆì°¨">3&nbsp;&nbsp;PoE ì „ë°©ê¸°êµ¬í•™ â€” Pinocchio ì‹¤ë¬´ ì ˆì°¨</h2>
<p>ì•„ë˜ ì˜ˆì‹œëŠ” <strong>Allegro&nbsp;Hand í•˜ë‚˜ì˜ ì†ê°€ë½(4&nbsp;DoF)</strong>ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•œë‹¤. URDFì—ì„œ <strong>ìŠ¤í¬ë£¨ í–‰ë ¬ <span class="math inline">S</span></strong>ì™€ <strong>í™ˆ í¬ì¦ˆ <span class="math inline">M</span></strong>ë¥¼ ìë™ ì¶”ì¶œí•œ ë’¤, NumPyë¡œ PoE&nbsp;FKë¥¼ êµ¬í˜„í•˜ê³  Pinocchio ê²°ê³¼ì™€ ê²€ì¦í•œë‹¤.</p>
<section id="ìŠ¤í¬ë£¨-í–‰ë ¬-s-ìë™-ì¶”ì¶œ" class="level3">
<h3 class="anchored" data-anchor-id="ìŠ¤í¬ë£¨-í–‰ë ¬-s-ìë™-ì¶”ì¶œ">3.1&nbsp;&nbsp;ìŠ¤í¬ë£¨ í–‰ë ¬ <strong>S</strong> ìë™ ì¶”ì¶œ</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> pinocchio <span class="im">as</span> pin</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">from</span> pinocchio.robot_wrapper <span class="im">import</span> RobotWrapper</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># 1) URDF ë¡œë“œ â”€ ë©”ì‹œ ë¡œë”©ì€ ìƒëµí•´ ì†ë„ í–¥ìƒ</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>urdf <span class="op">=</span> Path(<span class="st">"../allegro/allegro.urdf"</span>).resolve()</span>
<span id="cb1-8"><a href="#cb1-8"></a>robot <span class="op">=</span> RobotWrapper.BuildFromURDF(</span>
<span id="cb1-9"><a href="#cb1-9"></a>    <span class="bu">str</span>(urdf), [<span class="bu">str</span>(urdf.parent)], geometry_types<span class="op">=</span>()  <span class="co"># geometry ë¬´ì‹œ</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>)</span>
<span id="cb1-11"><a href="#cb1-11"></a>model, data <span class="op">=</span> robot.model, robot.data</span>
<span id="cb1-12"><a href="#cb1-12"></a></span>
<span id="cb1-13"><a href="#cb1-13"></a>S_cols <span class="op">=</span> []  <span class="co"># ìŠ¤í¬ë£¨ ë²¡í„°ë“¤ì„ ì €ì¥í•  ë¦¬ìŠ¤íŠ¸</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="cf">for</span> jid <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, model.njoints):  <span class="co"># 0 = universe(ì›”ë“œ)</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>    <span class="co"># 2) ë¡œì»¬ ê´€ì ˆì¶• (URDFì—ì„œ ì •ì˜) â†’ ë² ì´ìŠ¤ ì¢Œí‘œê³„ë¡œ ë³€í™˜</span></span>
<span id="cb1-16"><a href="#cb1-16"></a>    axis_local <span class="op">=</span> model.joints[jid].axis            <span class="co"># 3â€‘vector</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>    oMi <span class="op">=</span> model.jointPlacements[jid]               <span class="co"># ë¶€ëª¨â†’ê´€ì ˆ ë³€í™˜ SE3</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>    omega <span class="op">=</span> oMi.rotation <span class="op">@</span> axis_local              <span class="co"># Ï‰: world frame ë‹¨ìœ„ë²¡í„°</span></span>
<span id="cb1-19"><a href="#cb1-19"></a></span>
<span id="cb1-20"><a href="#cb1-20"></a>    <span class="co"># 3) v = âˆ’Ï‰ Ã— q (q = ê´€ì ˆì¶•ì„ ì§€ë‚˜ëŠ” ì„ì˜ ì , ì—¬ê¸°ì„œëŠ” ê´€ì ˆ ìœ„ì¹˜)</span></span>
<span id="cb1-21"><a href="#cb1-21"></a>    q_pt <span class="op">=</span> oMi.translation</span>
<span id="cb1-22"><a href="#cb1-22"></a>    v <span class="op">=</span> <span class="op">-</span>np.cross(omega, q_pt)</span>
<span id="cb1-23"><a href="#cb1-23"></a></span>
<span id="cb1-24"><a href="#cb1-24"></a>    S_cols.append(np.r_[omega, v])                 <span class="co"># [Ï‰, v] ì—°ê²°</span></span>
<span id="cb1-25"><a href="#cb1-25"></a></span>
<span id="cb1-26"><a href="#cb1-26"></a>S <span class="op">=</span> np.stack(S_cols, axis<span class="op">=</span><span class="dv">1</span>)  <span class="co"># shape = (6, n)</span></span>
<span id="cb1-27"><a href="#cb1-27"></a><span class="bu">print</span>(<span class="st">"Screw matrix shape:"</span>, S.shape)  <span class="co"># (6, 4)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><strong>ì„¤ëª…:</strong> Pinocchioê°€ ì œê³µí•œ <code>axis</code>ì™€ <code>jointPlacements</code>ë§Œìœ¼ë¡œ <strong>ë² ì´ìŠ¤ ì¢Œí‘œê³„ ê¸°ì¤€ ìŠ¤í¬ë£¨</strong>ë¥¼ ê³„ì‚°í•œë‹¤. ì§ì„  ê´€ì ˆì´ë¼ë©´ <code>omega = 0</code>, <code>v</code>ëŠ” URDFì˜ ì´ë™ì¶• ë‹¨ìœ„ë²¡í„°ê°€ ëœë‹¤.</p>
</blockquote>
</section>
<section id="í™ˆ-í¬ì¦ˆ-m-ì¶”ì¶œ" class="level3">
<h3 class="anchored" data-anchor-id="í™ˆ-í¬ì¦ˆ-m-ì¶”ì¶œ">3.2&nbsp;&nbsp;í™ˆ í¬ì¦ˆ <strong>M</strong> ì¶”ì¶œ</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a>fid <span class="op">=</span> model.getFrameId(<span class="st">"link_3.0_tip"</span>)          <span class="co"># ì†ê°€ë½ ë í”„ë ˆì„ ID</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>M <span class="op">=</span> model.frames[fid].placement.homogeneous      <span class="co"># 4Ã—4 numpy array</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><strong>ì£¼ì˜:</strong> í™ˆ í¬ì¦ˆëŠ” *â€œq=0ì¼ ë•Œ ì—”ë“œ&nbsp;ì´í™í„° ìì„¸â€*ì´ë‹¤. URDFì—ì„œ z-up&nbsp;/&nbsp;x-forward ë“±ì˜ ì°¨ì´ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, Jacobian í•´ì„ì´ ê¼¬ì´ë©´ <strong>M ì •ì˜ë¶€í„°</strong> ì˜ì‹¬í•˜ì.</p>
</blockquote>
</section>
<section id="numpy-poe-fk-í•¨ìˆ˜" class="level3">
<h3 class="anchored" data-anchor-id="numpy-poe-fk-í•¨ìˆ˜">3.3&nbsp;&nbsp;NumPy&nbsp;PoE FK í•¨ìˆ˜</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="im">from</span> scipy.linalg <span class="im">import</span> expm</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="kw">def</span> hat(xi: np.ndarray) <span class="op">-&gt;</span> np.ndarray:</span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="co">"""6â€‘ë²¡í„° â†’ 4Ã—4 ì ì¬í–‰ë ¬(ìŠ¤í¬ë£¨ ëŒ€ìˆ˜ å…ƒ)"""</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>    omega, v <span class="op">=</span> xi[:<span class="dv">3</span>], xi[<span class="dv">3</span>:]</span>
<span id="cb3-6"><a href="#cb3-6"></a>    omega_hat <span class="op">=</span> np.array([</span>
<span id="cb3-7"><a href="#cb3-7"></a>        [<span class="dv">0</span>,       <span class="op">-</span>omega[<span class="dv">2</span>],  omega[<span class="dv">1</span>]],</span>
<span id="cb3-8"><a href="#cb3-8"></a>        [omega[<span class="dv">2</span>], <span class="dv">0</span>,        <span class="op">-</span>omega[<span class="dv">0</span>]],</span>
<span id="cb3-9"><a href="#cb3-9"></a>        [<span class="op">-</span>omega[<span class="dv">1</span>], omega[<span class="dv">0</span>], <span class="dv">0</span>]</span>
<span id="cb3-10"><a href="#cb3-10"></a>    ])</span>
<span id="cb3-11"><a href="#cb3-11"></a>    <span class="cf">return</span> np.block([</span>
<span id="cb3-12"><a href="#cb3-12"></a>        [omega_hat, v.reshape(<span class="dv">3</span>, <span class="dv">1</span>)],</span>
<span id="cb3-13"><a href="#cb3-13"></a>        [np.zeros((<span class="dv">1</span>, <span class="dv">3</span>)), <span class="dv">0</span>]</span>
<span id="cb3-14"><a href="#cb3-14"></a>    ])</span>
<span id="cb3-15"><a href="#cb3-15"></a></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="kw">def</span> fk_poe(q: np.ndarray) <span class="op">-&gt;</span> np.ndarray:</span>
<span id="cb3-17"><a href="#cb3-17"></a>    <span class="co">"""PoE Forward Kinematics (4Ã—4)"""</span></span>
<span id="cb3-18"><a href="#cb3-18"></a>    T <span class="op">=</span> np.eye(<span class="dv">4</span>)</span>
<span id="cb3-19"><a href="#cb3-19"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(q)):</span>
<span id="cb3-20"><a href="#cb3-20"></a>        T <span class="op">@=</span> expm(hat(S[:, i]) <span class="op">*</span> q[i])  <span class="co"># ê´€ì ˆ i ë³€í™˜ ëˆ„ì </span></span>
<span id="cb3-21"><a href="#cb3-21"></a>    <span class="cf">return</span> T <span class="op">@</span> M</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pinocchio-fkì™€-ì¼ì¹˜ì„±-ê²€ì¦" class="level3">
<h3 class="anchored" data-anchor-id="pinocchio-fkì™€-ì¼ì¹˜ì„±-ê²€ì¦">3.4&nbsp;&nbsp;Pinocchio FKì™€ ì¼ì¹˜ì„± ê²€ì¦</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">50</span>):</span>
<span id="cb4-2"><a href="#cb4-2"></a>    q_rand <span class="op">=</span> pin.randomConfiguration(model)       <span class="co"># ë¬´ì‘ìœ„ ê´€ì ˆë²¡í„°</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>    pin.forwardKinematics(model, data, q_rand)</span>
<span id="cb4-4"><a href="#cb4-4"></a>    pin.updateFramePlacements(model, data)</span>
<span id="cb4-5"><a href="#cb4-5"></a>    T_pin <span class="op">=</span> data.oMf[fid].homogeneous             <span class="co"># Pinocchio FK</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>    <span class="cf">assert</span> np.allclose(fk_poe(q_rand), T_pin, atol<span class="op">=</span><span class="fl">1e-10</span>)</span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="bu">print</span>(<span class="st">"PoE FK == Pinocchio FK âœ…"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
<section id="jacobians-adjoint-ê¸°ë°˜-ê³„ì‚°-pinocchio-ë¹„êµ" class="level2">
<h2 class="anchored" data-anchor-id="jacobians-adjoint-ê¸°ë°˜-ê³„ì‚°-pinocchio-ë¹„êµ">4&nbsp;&nbsp;Jacobians â€” Adjoint ê¸°ë°˜ ê³„ì‚° &amp; Pinocchio ë¹„êµ</h2>
<section id="adjoint-ì—°ì‚°ì˜-ê¸°í•˜ì -ì˜ë¯¸" class="level3">
<h3 class="anchored" data-anchor-id="adjoint-ì—°ì‚°ì˜-ê¸°í•˜ì -ì˜ë¯¸">4.1&nbsp;&nbsp;Adjoint ì—°ì‚°ì˜ ê¸°í•˜ì  ì˜ë¯¸</h3>
<p><strong>Adjoint(Ad)</strong>ëŠ” í•œ ë³€í™˜ <span class="math inline">T</span>ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, <strong>ë²¡í„° ê³µê°„ <span class="math inline">\mathfrak{se}(3)</span></strong> ìƒì—ì„œ ì¢Œí‘œê³„ë¥¼ ë³€í™˜í•˜ëŠ” ì„ í˜• ì—°ì‚°ìì´ë‹¤. ì‰½ê²Œ ë§í•´, <strong>ê³µê°„ Jacobian</strong>ì„ ëˆ„ì í•  ë•Œ â€œì§€ê¸ˆê¹Œì§€ ì ìš©ëœ ë³€í™˜â€ì´ ë‹¤ìŒ ê´€ì ˆ ì¶•ì„ <strong>ë² ì´ìŠ¤ ì¢Œí‘œê³„ì—ì„œ ì–´ë–»ê²Œ ë³´ì´ê²Œ í•˜ëŠ”ì§€</strong>ë¥¼ ì•Œë ¤ì¤€ë‹¤.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">def</span> Ad(T: np.ndarray) <span class="op">-&gt;</span> np.ndarray:</span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="co">"""4Ã—4 ë³€í™˜í–‰ë ¬ â†’ 6Ã—6 Adjoint"""</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>    R, p <span class="op">=</span> T[:<span class="dv">3</span>, :<span class="dv">3</span>], T[:<span class="dv">3</span>, <span class="dv">3</span>]</span>
<span id="cb5-4"><a href="#cb5-4"></a>    p_hat <span class="op">=</span> np.array([</span>
<span id="cb5-5"><a href="#cb5-5"></a>        [<span class="dv">0</span>, <span class="op">-</span>p[<span class="dv">2</span>], p[<span class="dv">1</span>]],</span>
<span id="cb5-6"><a href="#cb5-6"></a>        [p[<span class="dv">2</span>], <span class="dv">0</span>, <span class="op">-</span>p[<span class="dv">0</span>]],</span>
<span id="cb5-7"><a href="#cb5-7"></a>        [<span class="op">-</span>p[<span class="dv">1</span>], p[<span class="dv">0</span>], <span class="dv">0</span>]</span>
<span id="cb5-8"><a href="#cb5-8"></a>    ])</span>
<span id="cb5-9"><a href="#cb5-9"></a>    <span class="cf">return</span> np.block([</span>
<span id="cb5-10"><a href="#cb5-10"></a>        [R,            np.zeros((<span class="dv">3</span>, <span class="dv">3</span>))],</span>
<span id="cb5-11"><a href="#cb5-11"></a>        [p_hat <span class="op">@</span> R,    R]</span>
<span id="cb5-12"><a href="#cb5-12"></a>    ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="ê³µê°„-jacobian-êµ¬í˜„" class="level3">
<h3 class="anchored" data-anchor-id="ê³µê°„-jacobian-êµ¬í˜„">4.2&nbsp;&nbsp;ê³µê°„ Jacobian êµ¬í˜„</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw">def</span> jac_space(S: np.ndarray, q: np.ndarray) <span class="op">-&gt;</span> np.ndarray:</span>
<span id="cb6-2"><a href="#cb6-2"></a>    <span class="co">"""6Ã—n ê³µê°„ Jacobian (ë² ì´ìŠ¤ ì¢Œí‘œê³„)"""</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>    T_prev <span class="op">=</span> np.eye(<span class="dv">4</span>)  <span class="co"># ì²« ê´€ì ˆ ì „ê¹Œì§€ ë³€í™˜ = I</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>    cols <span class="op">=</span> []</span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(S.shape[<span class="dv">1</span>]):</span>
<span id="cb6-6"><a href="#cb6-6"></a>        cols.append(Ad(T_prev) <span class="op">@</span> S[:, i])        <span class="co"># ì—´ i</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>        T_prev <span class="op">@=</span> expm(hat(S[:, i]) <span class="op">*</span> q[i])      <span class="co"># ë‹¤ìŒ ê´€ì ˆë¡œ ëˆ„ì </span></span>
<span id="cb6-8"><a href="#cb6-8"></a>    <span class="cf">return</span> np.column_stack(cols)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pinocchio-jacobianê³¼-ê²€ì¦" class="level3">
<h3 class="anchored" data-anchor-id="pinocchio-jacobianê³¼-ê²€ì¦">4.3&nbsp;&nbsp;Pinocchio Jacobianê³¼ ê²€ì¦</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a>q <span class="op">=</span> pin.randomConfiguration(model)</span>
<span id="cb7-2"><a href="#cb7-2"></a>pin.computeJointJacobians(model, data, q)</span>
<span id="cb7-3"><a href="#cb7-3"></a>pin.updateFramePlacements(model, data)</span>
<span id="cb7-4"><a href="#cb7-4"></a>J_pin <span class="op">=</span> pin.getFrameJacobian(</span>
<span id="cb7-5"><a href="#cb7-5"></a>    model, data, fid,</span>
<span id="cb7-6"><a href="#cb7-6"></a>    pin.ReferenceFrame.LOCAL_WORLD_ALIGNED</span>
<span id="cb7-7"><a href="#cb7-7"></a>)</span>
<span id="cb7-8"><a href="#cb7-8"></a>J_poe <span class="op">=</span> jac_space(S, q)</span>
<span id="cb7-9"><a href="#cb7-9"></a>np.testing.assert_allclose(J_poe, J_pin, atol<span class="op">=</span><span class="fl">1e-8</span>)</span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="bu">print</span>(<span class="st">"PoE Jacobian == Pinocchio Jacobian âœ…"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="ë°”ë””-jacobian-ë³€í™˜" class="level3">
<h3 class="anchored" data-anchor-id="ë°”ë””-jacobian-ë³€í™˜">4.4&nbsp;&nbsp;ë°”ë”” Jacobian ë³€í™˜</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a>T_ee <span class="op">=</span> fk_poe(q)</span>
<span id="cb8-2"><a href="#cb8-2"></a>J_body <span class="op">=</span> Ad(np.linalg.inv(T_ee)) <span class="op">@</span> J_poe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p>ë°”ë”” Jacobianì€ ì—”ë“œì´í™í„° í”„ë ˆì„ì—ì„œ í•´ì„ëœ Jacobianì´ë‹¤. Inverse&nbsp;Kinematicsë‚˜ ì»¨íŠ¸ë¡¤ì—ì„œ <strong>ì—”ë“œì´í™í„° ê¸°ì¤€ ì˜¤ì°¨</strong>ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ìœ ìš©í•˜ë‹¤.</p>
</blockquote>
<hr>
</section>
</section>
<section id="casadi-codegen-ë”¥ëŸ¬ë‹-ì—°ë™" class="level2">
<h2 class="anchored" data-anchor-id="casadi-codegen-ë”¥ëŸ¬ë‹-ì—°ë™">5&nbsp;&nbsp;CasADi CodeGen â†’ ë”¥ëŸ¬ë‹ ì—°ë™</h2>
<p>PoE ìˆ˜ì‹ì„ <strong>CasADi</strong>ë¡œ í‘œí˜„í•˜ë©´, <strong>C&nbsp;ì½”ë“œ ìë™ ìƒì„±</strong>ì„ í†µí•´ ì„ë² ë””ë“œ MCUë‚˜ GPU&nbsp;ì»¤ìŠ¤í…€ ì—°ì‚°ìë¡œ ì‰½ê²Œ ì—°ê²°í•  ìˆ˜ ìˆë‹¤.</p>
<section id="c-ì½”ë“œ-ìë™-ìƒì„±-floatdouble-ì „í™˜-ì§€ì›" class="level3">
<h3 class="anchored" data-anchor-id="c-ì½”ë“œ-ìë™-ìƒì„±-floatdouble-ì „í™˜-ì§€ì›">5.1&nbsp;&nbsp;C ì½”ë“œ ìë™ ìƒì„± (float/double ì „í™˜ ì§€ì›)</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="im">import</span> casadi <span class="im">as</span> ca</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co"># â”€â”€ 1. í•œ ê´€ì ˆì˜ exp(\hat\xi Î¸) êµ¬í˜„ (SX ì‹¬ë³¼ë¦­) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="kw">def</span> exp6_cas(xi, theta):</span>
<span id="cb9-7"><a href="#cb9-7"></a>    omega, v <span class="op">=</span> xi[:<span class="dv">3</span>], xi[<span class="dv">3</span>:]</span>
<span id="cb9-8"><a href="#cb9-8"></a>    omega_hat <span class="op">=</span> ca.skew(omega)          <span class="co"># 3Ã—3</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>    I <span class="op">=</span> ca.SX.eye(<span class="dv">3</span>)</span>
<span id="cb9-10"><a href="#cb9-10"></a></span>
<span id="cb9-11"><a href="#cb9-11"></a>    R <span class="op">=</span> I <span class="op">+</span> ca.sin(theta) <span class="op">*</span> omega_hat <span class="op">+</span> <span class="op">\</span></span>
<span id="cb9-12"><a href="#cb9-12"></a>        (<span class="dv">1</span> <span class="op">-</span> ca.cos(theta)) <span class="op">*</span> (omega_hat <span class="op">@</span> omega_hat)</span>
<span id="cb9-13"><a href="#cb9-13"></a></span>
<span id="cb9-14"><a href="#cb9-14"></a>    J <span class="op">=</span> I <span class="op">*</span> theta <span class="op">+</span> (<span class="dv">1</span> <span class="op">-</span> ca.cos(theta)) <span class="op">*</span> omega_hat <span class="op">+</span> <span class="op">\</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>        (theta <span class="op">-</span> ca.sin(theta)) <span class="op">*</span> (omega_hat <span class="op">@</span> omega_hat)</span>
<span id="cb9-16"><a href="#cb9-16"></a>    P <span class="op">=</span> J <span class="op">@</span> v</span>
<span id="cb9-17"><a href="#cb9-17"></a></span>
<span id="cb9-18"><a href="#cb9-18"></a>    T <span class="op">=</span> ca.SX.zeros(<span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb9-19"><a href="#cb9-19"></a>    T[:<span class="dv">3</span>, :<span class="dv">3</span>], T[:<span class="dv">3</span>, <span class="dv">3</span>], T[<span class="dv">3</span>, <span class="dv">3</span>] <span class="op">=</span> R, P, <span class="dv">1</span></span>
<span id="cb9-20"><a href="#cb9-20"></a>    <span class="cf">return</span> T</span>
<span id="cb9-21"><a href="#cb9-21"></a></span>
<span id="cb9-22"><a href="#cb9-22"></a><span class="co"># â”€â”€ 2. 4â€‘DoF ì†ê°€ë½ FK &amp; Jacobian ì‹¬ë³¼ë¦­ ì •ì˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span id="cb9-23"><a href="#cb9-23"></a></span>
<span id="cb9-24"><a href="#cb9-24"></a>q <span class="op">=</span> ca.SX.sym(<span class="st">"q"</span>, <span class="dv">4</span>)           <span class="co"># ê´€ì ˆ ë³€ìˆ˜ ì‹¬ë³¼ë¦­</span></span>
<span id="cb9-25"><a href="#cb9-25"></a>T <span class="op">=</span> ca.SX.eye(<span class="dv">4</span>)</span>
<span id="cb9-26"><a href="#cb9-26"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>):</span>
<span id="cb9-27"><a href="#cb9-27"></a>    T <span class="op">@=</span> exp6_cas(ca.DM(S[:, i]), q[i])</span>
<span id="cb9-28"><a href="#cb9-28"></a>T <span class="op">@=</span> ca.DM(M)</span>
<span id="cb9-29"><a href="#cb9-29"></a></span>
<span id="cb9-30"><a href="#cb9-30"></a>Jp <span class="op">=</span> ca.jacobian(T[:<span class="dv">3</span>, <span class="dv">3</span>], q)                       <span class="co"># ì„ ì†ë„ Jacobian</span></span>
<span id="cb9-31"><a href="#cb9-31"></a>Jw <span class="op">=</span> ca.hcat([S[:<span class="dv">3</span>, i] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>)])          <span class="co"># ê°ì†ë„ ë¶€ë¶„(ìƒìˆ˜)</span></span>
<span id="cb9-32"><a href="#cb9-32"></a>J6 <span class="op">=</span> ca.vertcat(Jp, Jw)</span>
<span id="cb9-33"><a href="#cb9-33"></a></span>
<span id="cb9-34"><a href="#cb9-34"></a>f <span class="op">=</span> ca.Function(<span class="st">"allegro_finger_jac"</span>, [q], [J6])</span>
<span id="cb9-35"><a href="#cb9-35"></a></span>
<span id="cb9-36"><a href="#cb9-36"></a><span class="co"># â”€â”€ 3. ì½”ë“œ ìƒì„± â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€”â€”</span></span>
<span id="cb9-37"><a href="#cb9-37"></a>cg <span class="op">=</span> ca.CodeGenerator(<span class="st">"allegro_finger_jac.c"</span>)</span>
<span id="cb9-38"><a href="#cb9-38"></a>cg.add(f)</span>
<span id="cb9-39"><a href="#cb9-39"></a>cg.generate()            <span class="co"># allegro_finger_jac.c / .h ìƒì„±</span></span>
<span id="cb9-40"><a href="#cb9-40"></a><span class="bu">print</span>(<span class="st">"C code generated âœ”"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><code>CASADI_REAL</code> ë§¤í¬ë¡œë¡œ float/double ì „í™˜ ê°€ëŠ¥. MCU(ì˜ˆ:&nbsp;STM32) ë“±ì— í¬íŒ… ì‹œ <code>-DCASADI_REAL=float</code>ë¡œ ì»´íŒŒì¼í•˜ë©´ ì‹±ê¸€ í”„ë¦¬ì‹œì „ ì‚¬ìš©.</p>
</blockquote>
</section>
<section id="pytorch-custom-autograd-ì—°ë™-gpu-í˜¸í™˜" class="level3">
<h3 class="anchored" data-anchor-id="pytorch-custom-autograd-ì—°ë™-gpu-í˜¸í™˜">5.2&nbsp;&nbsp;PyTorch Custom&nbsp;Autograd ì—°ë™ (GPU í˜¸í™˜)</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="im">import</span> torch</span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="im">from</span> ctypes <span class="im">import</span> CDLL, c_float, POINTER</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb10-4"><a href="#cb10-4"></a></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co"># 1) ë¡œë“œí•œ .soëŠ” gcc -shared -fPIC ... ë¡œ ë¹Œë“œí–ˆë‹¤ê³  ê°€ì •</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>lib <span class="op">=</span> CDLL(<span class="st">"./allegro_finger_jac.so"</span>)</span>
<span id="cb10-7"><a href="#cb10-7"></a>lib.allegro_finger_jac.argtypes <span class="op">=</span> [POINTER(c_float), POINTER(c_float)]</span>
<span id="cb10-8"><a href="#cb10-8"></a>lib.allegro_finger_jac.restype  <span class="op">=</span> <span class="va">None</span></span>
<span id="cb10-9"><a href="#cb10-9"></a></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="kw">class</span> FingerJac(torch.autograd.Function):</span>
<span id="cb10-11"><a href="#cb10-11"></a>    <span class="co">"""CasADi ìƒì„± ì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” PyTorch ì—°ì‚°ì"""</span></span>
<span id="cb10-12"><a href="#cb10-12"></a></span>
<span id="cb10-13"><a href="#cb10-13"></a>    <span class="at">@staticmethod</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>    <span class="kw">def</span> forward(ctx, q):</span>
<span id="cb10-15"><a href="#cb10-15"></a>        q_np <span class="op">=</span> q.detach().cpu().numpy().astype(<span class="st">"float32"</span>)</span>
<span id="cb10-16"><a href="#cb10-16"></a>        J_np <span class="op">=</span> np.empty((<span class="dv">24</span>,), dtype<span class="op">=</span><span class="st">"float32"</span>)</span>
<span id="cb10-17"><a href="#cb10-17"></a></span>
<span id="cb10-18"><a href="#cb10-18"></a>        <span class="co"># C í•¨ìˆ˜ í˜¸ì¶œ: J_np = f(q_np)</span></span>
<span id="cb10-19"><a href="#cb10-19"></a>        lib.allegro_finger_jac(q_np.ctypes.data_as(POINTER(c_float)),</span>
<span id="cb10-20"><a href="#cb10-20"></a>                               J_np.ctypes.data_as(POINTER(c_float)))</span>
<span id="cb10-21"><a href="#cb10-21"></a></span>
<span id="cb10-22"><a href="#cb10-22"></a>        J <span class="op">=</span> torch.from_numpy(J_np.reshape(<span class="dv">6</span>, <span class="dv">4</span>)).to(q.device)</span>
<span id="cb10-23"><a href="#cb10-23"></a>        ctx.save_for_backward(q)  <span class="co"># backward ìš© ì €ì¥</span></span>
<span id="cb10-24"><a href="#cb10-24"></a>        <span class="cf">return</span> J</span>
<span id="cb10-25"><a href="#cb10-25"></a></span>
<span id="cb10-26"><a href="#cb10-26"></a>    <span class="at">@staticmethod</span></span>
<span id="cb10-27"><a href="#cb10-27"></a>    <span class="kw">def</span> backward(ctx, dL_dJ):</span>
<span id="cb10-28"><a href="#cb10-28"></a>        q, <span class="op">=</span> ctx.saved_tensors</span>
<span id="cb10-29"><a href="#cb10-29"></a>        <span class="co"># ì‹¬í”Œ: ì‹¤ìŠµìš©ìœ¼ë¡œ 0&nbsp;ê·¸ë¼ë“œ ë°˜í™˜. ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„ </span></span>
<span id="cb10-30"><a href="#cb10-30"></a>        <span class="co"># CasADië¡œ Hessian ìƒì„±, ë˜ëŠ” finite diff ë“± ì‚¬ìš©.</span></span>
<span id="cb10-31"><a href="#cb10-31"></a>        <span class="cf">return</span> torch.zeros_like(q)</span>
<span id="cb10-32"><a href="#cb10-32"></a></span>
<span id="cb10-33"><a href="#cb10-33"></a><span class="co"># â”€â”€ ì‚¬ìš© ì˜ˆì‹œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span id="cb10-34"><a href="#cb10-34"></a>q_t <span class="op">=</span> torch.randn(<span class="dv">4</span>, requires_grad<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb10-35"><a href="#cb10-35"></a>J_t <span class="op">=</span> FingerJac.<span class="bu">apply</span>(q_t)</span>
<span id="cb10-36"><a href="#cb10-36"></a>loss <span class="op">=</span> (J_t <span class="op">**</span> <span class="dv">2</span>).<span class="bu">sum</span>()</span>
<span id="cb10-37"><a href="#cb10-37"></a>loss.backward()</span>
<span id="cb10-38"><a href="#cb10-38"></a><span class="bu">print</span>(<span class="st">"dLoss/dq:"</span>, q_t.grad)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><strong>Tip&nbsp;ğŸ’¡</strong>&nbsp;<code>torch.utils.cpp_extension.load()</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ë¹Œë“œ ë° ë¡œë”©ì„ PyTorchê°€ ìë™ ê´€ë¦¬í•´, CUDA&nbsp;ì»¤ë„ì„ í¬í•¨í•œ í™•ì¥ ì—°ì‚°ìë¥¼ ë¹ ë¥´ê²Œ ì‹¤í—˜í•  ìˆ˜ ìˆë‹¤.</p>
</blockquote>
<hr>
</section>
</section>
<section id="í˜„ì—…-tips-ì ì¬ì -í•¨ì •" class="level2">
<h2 class="anchored" data-anchor-id="í˜„ì—…-tips-ì ì¬ì -í•¨ì •">6&nbsp;&nbsp;í˜„ì—… Tips &amp; ì ì¬ì  í•¨ì •</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">&nbsp;í•­ëª©&nbsp;</th>
<th style="text-align: left;">ì²´í¬í¬ì¸íŠ¸&nbsp;</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>ì¶• ë°©í–¥ ë¶€í˜¸</strong></td>
<td style="text-align: left;">CAD/URDF ì¶•ì´ Â± ë°˜ëŒ€ì¼ ìˆ˜ ìˆë‹¤. Ï‰ ë¶€í˜¸ í™•ì¸ í›„ í•¸ë“œ ê·œê²©ì„œì™€ ëŒ€ì¡°.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>í™ˆ í¬ì¦ˆ <span class="math inline">M</span></strong></td>
<td style="text-align: left;">í”„ë ˆì„ ì˜ëª» ì¡ìœ¼ë©´ Jacobian í•´ì„ ì˜¤ë¥˜. íˆ´&nbsp;í”„ë ˆì„ ê¸°ì¤€ì„ ëª…í™•íˆ.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>ìˆ˜ì¹˜ ì•ˆì •ì„±</strong></td>
<td style="text-align: left;">ê´€ì ˆ ìˆ˜ê°€ ë§ì€ ë¡œë´‡ì€ <span class="math inline">\exp(\hat\xi_i q_i)</span> ëˆ„ì  ì‹œ ì˜¤ì°¨ê°€ ì»¤ì§ˆ ìˆ˜ ìˆìŒ. <br>â†’&nbsp;ì¤‘ê°„ë§ˆë‹¤ <code>Adjoint</code> ì¬ê³„ì‚°í•˜ì—¬ ë“œë¦¬í”„íŠ¸ ì–µì œ.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>ëª¨ë¸ ë³´ì •</strong></td>
<td style="text-align: left;"><span class="math inline">\xi</span> íŒŒë¼ë¯¸í„°ëŠ” ë§¤ë‹ˆí´ë“œ <span class="math inline">\mathbb S^2!\times!\mathbb R^3</span>ì— ë†“ì¸ë‹¤. <br>â†’&nbsp;<code>Sophus</code>&nbsp;ë˜ëŠ”&nbsp;<code>pin.bias</code>ë¥¼ ì´ìš©í•œ <strong>Lie ìƒ˜í”ŒëŸ¬</strong>ë¡œ ìµœì í™”.</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>ë”¥ëŸ¬ë‹ í†µí•©</strong></td>
<td style="text-align: left;">CasADi&nbsp;C&nbsp;â†’&nbsp;<code>torch.autograd.Function</code> ë˜í•‘ ì‹œ GPU inference&nbsp;â‰ˆ&nbsp;native&nbsp;PyTorch ì†ë„.</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>ë³‘ë ¬Â·íì‡„ì²´ì¸</strong></td>
<td style="text-align: left;">PoEëŠ” ì§ë ¬ ì²´ì¸ ê°€ì •. íì‡„ ë£¨í”„ëŠ” ê°€ìƒ 6â€‘DoF ì¡°ì¸íŠ¸ ì¶”ê°€ í›„ <br>ë¼ê·¸ë‘ì£¼ ìŠ¹ìˆ˜ë¡œ ì œì•½ ì²˜ë¦¬.</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="ë§ºìŒë§" class="level2">
<h2 class="anchored" data-anchor-id="ë§ºìŒë§">ë§ºìŒë§</h2>
<p>PoE í‘œí˜„ì€ DH ê¸°êµ¬í•™ì˜ ì¢Œí‘œê³„ ì˜ì¡´ì„±ê³¼ íŒŒë¼ë¯¸í„° ë¶ˆì—°ì† ë¬¸ì œë¥¼ <strong>ê·¼ë³¸ì ìœ¼ë¡œ í•´ê²°</strong>í•œë‹¤. ìŠ¤í¬ë£¨&nbsp;<span class="math inline">\xi</span>ì™€ í™ˆ í¬ì¦ˆ&nbsp;<span class="math inline">M</span>ë§Œ ì •í•´ì§€ë©´ <strong>Forward&nbsp;Kinematics, Jacobian, ë™ì—­í•™</strong>ê¹Œì§€ ì¼ê´€ë˜ê²Œ íŒŒìƒë˜ë¯€ë¡œ, <strong>ëª¨ë¸ ë³´ì •Â·ê°•í™”í•™ìŠµÂ·MPC</strong> ë“± ê³ ê¸‰ ê¸°ë²•ì—ì„œ íƒì›”í•œ ìˆ˜ë ´ì„±ê³¼ ê²¬ê³ ì„±ì„ ë³´ì—¬ ì¤€ë‹¤.</p>
<p><strong>Pinocchio&nbsp;+&nbsp;CasADi</strong> ì¡°í•©ì„ í™œìš©í•˜ë©´ íŒŒì´ì¬ 100ì—¬&nbsp;ë¼ì¸ ì •ë„ë¡œ PoE&nbsp;ê¸°êµ¬í•™ ì „ì²´ íŒŒì´í”„ë¼ì¸ê³¼ <strong>ì„ë² ë””ë“œìš© C ì½”ë“œ</strong>ë¥¼ ì¦‰ì‹œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</p>
<blockquote class="blockquote">
<p>ì´ì œ ìŠ¤í¬ë£¨ í–‰ë ¬ê³¼ í™ˆ í¬ì¦ˆë§Œ ì¤€ë¹„í–ˆë‹¤ë©´, ë³¸ë¬¸ ì½”ë“œ ì¡°ê°ì„ ë³µì‚¬í•´ <strong>ë‹¹ì‹ ì˜ ë¡œë´‡ í”„ë¡œì íŠ¸</strong>ì— ë°”ë¡œ ì ìš©í•´ ë³´ì!</p>
</blockquote>
<p><strong>Reference</strong></p>
<ul>
<li>https://hades.mech.northwestern.edu/images/7/7f/MR.pdf#page=154.20</li>
<li>https://en.wikipedia.org/wiki/Product_of_exponentials_formula</li>
<li>https://ddangeun.tistory.com/26</li>
<li>https://web.casadi.org/</li>
<li>https://stack-of-tasks.github.io/pinocchio/</li>
<li>https://github.com/stack-of-tasks/pinocchio</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="curieuxjy/blog_comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, Jung Yeon Lee</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/curieuxjy">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>