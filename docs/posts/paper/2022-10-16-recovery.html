<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-10-16">
<meta name="description" content="Robust Recovery Controller for a Quadrupedal Robot using Deep Reinforcement Learning">

<title>Curieux.JY - ğŸ“ƒRobust Recovery Controller</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../profile.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-2NVZN2MJZT"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-2NVZN2MJZT', { 'anonymize_ip': true});
</script>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean",
  "openSidebar": false
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Curieux.JY</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Jung Yeon Lee</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../note.html"> 
<span class="menu-text">Note</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/curieuxjy"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#problem-statement" id="toc-problem-statement" class="nav-link" data-scroll-target="#problem-statement">Problem Statement</a>
  <ul class="collapse">
  <li><a href="#mpc-vs-rl" id="toc-mpc-vs-rl" class="nav-link" data-scroll-target="#mpc-vs-rl">MPC vs RL</a></li>
  <li><a href="#locomotion-vs-recovery" id="toc-locomotion-vs-recovery" class="nav-link" data-scroll-target="#locomotion-vs-recovery">Locomotion VS Recovery</a></li>
  </ul></li>
  <li><a href="#method" id="toc-method" class="nav-link" data-scroll-target="#method">Method</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#behavior-policies" id="toc-behavior-policies" class="nav-link" data-scroll-target="#behavior-policies">Behavior Policies</a></li>
  <li><a href="#height-estimator" id="toc-height-estimator" class="nav-link" data-scroll-target="#height-estimator">Height Estimator</a></li>
  <li><a href="#behavior-selector" id="toc-behavior-selector" class="nav-link" data-scroll-target="#behavior-selector">Behavior Selector</a></li>
  <li><a href="#simulating-anymal" id="toc-simulating-anymal" class="nav-link" data-scroll-target="#simulating-anymal">Simulating ANYmal</a></li>
  </ul></li>
  <li><a href="#result-and-discussion" id="toc-result-and-discussion" class="nav-link" data-scroll-target="#result-and-discussion">Result and Discussion</a>
  <ul class="collapse">
  <li><a href="#the-success-of-recovery" id="toc-the-success-of-recovery" class="nav-link" data-scroll-target="#the-success-of-recovery">The success of recovery</a></li>
  <li><a href="#the-effectiveness-of-height-estimator" id="toc-the-effectiveness-of-height-estimator" class="nav-link" data-scroll-target="#the-effectiveness-of-height-estimator">The effectiveness of Height Estimator</a></li>
  <li><a href="#the-competitiveness-of-beahavior-selector" id="toc-the-competitiveness-of-beahavior-selector" class="nav-link" data-scroll-target="#the-competitiveness-of-beahavior-selector">The competitiveness of Beahavior Selector</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ğŸ“ƒRobust Recovery Controller</h1>
  <div class="quarto-categories">
    <div class="quarto-category">rl</div>
    <div class="quarto-category">trpo</div>
    <div class="quarto-category">gae</div>
    <div class="quarto-category">recovery</div>
    <div class="quarto-category">quadruped</div>
    <div class="quarto-category">paper</div>
  </div>
  </div>

<div>
  <div class="description">
    Robust Recovery Controller for a Quadrupedal Robot using Deep Reinforcement Learning
  </div>
</div>


<div class="quarto-title-meta column-page-left">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 16, 2022</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><img src="https://i.imgur.com/mts8weC.jpg" class="img-fluid"></p>
<p>ì´ë²ˆ í¬ìŠ¤íŠ¸ëŠ” 4ì¡±ë³´í–‰ ë¡œë´‡ì´ ì „ë³µë˜ì—ˆì„ ë•Œ ë‹¤ì‹œ ì •ìƒì ìœ¼ë¡œ ë³´í–‰í•˜ê¸° ìœ„í•´ ìì„¸ë¥¼ íšŒë³µí•˜ëŠ” ëª¨ì…˜ ì œì–´(ì´í•˜ Recovery í˜¹ì€ Reset taskë¼ê³  ì§€ì¹­)ì„ ê°•í™”í•™ìŠµ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•˜ê³ ìí•œ <code>Robust Recovery Controller for a Quadrupedal Robot using Deep Reinforcement Learning</code>ë¼ëŠ” ë…¼ë¬¸ì— ëŒ€í•œ ë¦¬ë·°ì…ë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/Y3RomI1.jpg" class="img-fluid"></p>
<section id="abstract" class="level1">
<h1>Abstract</h1>
<blockquote class="blockquote">
<p>The ability to recover from a fall is an essential feature for a legged robot to navigate in challenging environments robustly. Until today, there has been very little progress on this topic. Current solutions mostly build upon (heuristically) predefined trajectories, resulting in unnatural behaviors and requiring considerable effort in engineering system-specific components. In this paper, we present an approach based on <code>model-free</code> Deep Reinforcement Learning (RL) to control recovery maneuvers of quadrupedal robots using a hierarchical behavior-based controller. The controller consists of <code>four neural network policies</code> including <code>three behaviors</code> and <code>one behavior selector</code> to coordinate them. Each of them is trained individually in simulation and deployed directly on a real system. We experimentally validate our approach on the quadrupedal robot <code>ANYmal</code>, which is a dog-sized quadrupedal system with 12 degrees of freedom. With our method, ANYmal manifests dynamic and reactive recovery behaviors to recover from an arbitrary fall configuration within <code>less than 5 seconds</code>. We tested the recovery maneuver more than 100 times, and the success rate was <code>higher than 97 %</code>.</p>
</blockquote>
<p><strong>ìš”ì•½</strong></p>
<ul>
<li>Model-free ê°•í™”í•™ìŠµ ì•Œê³ ë¦¬ì¦˜ì„ ì´ìš©</li>
<li>ì´ 4ê°œì˜ Neural Networkë¥¼ í™œìš©í•œ Policyë“¤ì„ ì„¤ê³„í•¨ (ì‹¤ì œë¡œ ì „ì²´ control systemì— ì“°ì¸ NNì€ 6ê°œ- Height Estimator, Actuator Network ì¶”ê°€)</li>
<li>ETHì—ì„œ ê°œë°œí•œ 4ì¡±ë³´í–‰ ë¡œë´‡ì¸ ANYmal í”Œë«í¼ì„ ì‚¬ìš©</li>
<li>5ì´ˆ ì´ë‚´ì˜ ì „ë³µíšŒë³µì„ ì•½ 97 í¼ì„¼íŠ¸ì˜ ì„±ê³µë¥ ë¡œ ìˆ˜í–‰</li>
</ul>
</section>
<section id="problem-statement" class="level1">
<h1>Problem Statement</h1>
<section id="mpc-vs-rl" class="level2">
<h2 class="anchored" data-anchor-id="mpc-vs-rl">MPC vs RL</h2>
<p>ì œì–´(Control) ë¶„ì•¼ì—ì„œ í˜„ì¬ í¬ê²Œ ì–‘ëŒ€ ë°©ë²•ë¡ ìœ¼ë¡œ MPC(Model Predictive Control)ê³¼ RL(Reinforcement Learning) ë°©ë²•ë¡ ì´ ì£¼ëª©ì„ ë°›ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¶„ë²•ì ìœ¼ë¡œ ë‘ ë°©ë²•ì´ í™•ì—°í•˜ê²Œ ë‚˜ëˆ„ì–´ì§€ê±°ë‚˜ ìš°ì—´ì´ ê°€ë ¤ì§€ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë‘ ë°©ë²•ë¡  ê°„ì˜ ê³µí†µì , ì°¨ì´ì ë“±ì„ ì‚´í´ë³´ë©° ì‹œì‘í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p>
<p>ì•„ë˜ ê·¸ë¦¼ì˜ <code>Optimal Control(ìµœì ì œì–´)</code>, <code>Operations Research(ê²½ì˜ê³¼í•™)</code>, <code>Reinforcement Learning(ê°•í™”í•™ìŠµ)</code>ì„ ê°ê° í•˜ë‚˜ì˜ ì§‘í•©ìœ¼ë¡œ í‘œì‹œí•˜ê³  ê° ê´€ê³„ë¥¼ ì‚´í´ë³´ë©´ ê¸°ì¡´ì˜ ì œì–´ ë°©ì‹ì˜ ë°œì „ íë¦„ì„ ì´ì–´ì˜¨ <strong>MPC</strong>ëŠ” <code>Optimal Control</code>ì— í¬í•¨ë˜ì–´ ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href="http://www.aistudy.com/economics/operation_research.htm"><code>Operations Research</code></a>ì€ ì¢€ ë” ë„“ì€ ë²”ìœ„ì˜ <strong>ì˜ì‚¬ ê²°ì • ëª¨ë¸</strong>ë“¤ì„ ì—°êµ¬í•˜ëŠ” ë¶„ì•¼ë¡œ ì£¼ë¡œ ì‚°ì—…ê³µí•™ì—ì„œ ë°°ìš°ëŠ” ë¶€ë¶„ì´ë©° ì˜ì‚¬ê²°ì •ì— ë„ì›€ì„ ë°›ê¸°ìœ„í•´ ìˆ˜í•™ì  ëª¨ë¸, í†µê³„í•™, ì•Œê³ ë¦¬ì¦˜ë“¤ì„ ì´ìš©í•˜ëŠ” ì—°êµ¬ë¶„ì•¼ ì…ë‹ˆë‹¤. ë”°ë¼ì„œ <code>Optimal Control</code>, <code>Operations Research</code>ì™€ ì˜¤ëŠ˜ì˜ ì£¼ì œ ë°©ë²•ë¡ ì¸ <code>Reinforcement Learning</code>ê³¼ì˜ ê´€ê³„ë¥¼ ì‚´í´ë³´ìë©´ ìˆ˜í•™ì  ëª¨ë¸ë§ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ <strong>Model-based Methods</strong>ê°€ <code>Optimal Control</code>ê³¼ <code>Reinforcement Learning</code>ì˜ êµì§‘í•© ë¶€ë¶„ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆê³  ìµœê·¼ ê°•í™”í•™ìŠµ ì—°êµ¬ë“¤ë„ <strong>Model-based RL</strong>ìœ¼ë¡œ ì—°êµ¬ë“¤ì´ ë§ì´ ì´ë£¨ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤. <code>Operations Research</code>ì™€ <code>Reinforcement Learning</code>ì˜ êµì§‘í•©ìœ¼ë¡œëŠ” <strong>Large action-space Method</strong>ë¡œ ë³¼ ìˆ˜ ìˆëŠ”ë°, ê¸°ì¡´ì˜ ì•„íƒ€ë¦¬ ê²Œì„ê³¼ ê°™ì´ ê°„ë‹¨í•œ ë°©í–¥ ì¡°ì‘í‚¤ì™€ ê°™ì€ actionì˜ ì„ íƒì§€ê°€ ì ì€ ê²½ìš°ì— ë¹„í•´ ì˜ì‚¬ê²°ì •ì„ ë‚´ë ¤ì•¼í•˜ëŠ” ìƒí™©ì´ ë³µì¡í•  ìˆ˜ë¡ ì¦‰, ë¬¸ì œê°€ ë” ì–´ë µê³  ë³µì¡í•  ìˆ˜ë¡ actionì˜ ì„ íƒì§€ê°€ ë§ì•„ì§€ê¸° ë•Œë¬¸ì— action spaceê°€ ë” ì»¤ì§€ëŠ” ë°©í–¥ìœ¼ë¡œ ì—°êµ¬ê°€ ë§ì´ ì´ë£¨ì–´ì§€ê³  ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ê·¸ëŸ¼ ì¢€ ë” ìì„¸íˆ MPCê³¼ RLì„ ë¹„êµí•´ë³´ë©´, MPCëŠ” ê·¸ë¦¼ê³¼ ê°™ì´ ë§ˆì¹˜ ì–´ë‘ ì†ì—ì„œ ì†ì „ë“±ì„ í‚¤ê³  ë¹›ì„ ë”°ë¼ í•˜ë‚˜ì˜ ê¸¸ì„ ë³´ë“¯ì´, í•˜ë‚˜ì˜ ìµœì ì˜ trajectoryë¥¼ ì°¾ì•„ ê·¸ trajectoryì˜ 1 stepì„ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. ìˆ˜í•™ì ìœ¼ë¡œ ëª¨ë¸ë§í•œ ìµœì ì‹ì˜ í•´ë¥¼ êµ¬í•´ì„œ ê³„ì‚°ê³¼ ì‹¤í–‰ì„ ë°˜ë³µí•˜ë©° ì œì–´ë¥¼ í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤. ë°˜ë©´ RLì€ search spaceë¥¼ MDP(Markov Decision Process)ë¥¼ ì´ìš©í•˜ì—¬ ì •ì˜í•˜ê³  í•™ìŠµì„ í•˜ë©° ì‹œì  tì—ì„œì˜ ìµœì ì˜ actionì„ í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ë‘ê°€ì§€ ë°©ë²• ëª¨ë‘ Advanced ì‹œí‚¬ ë¶€ë¶„ì´ ë§ì´ ë‚¨ì•„ìˆê³  MPCëŠ” non-linear ë°©í–¥ìœ¼ë¡œ ë‚˜ì•„ê°€ê³  ìˆìœ¼ë©° RLì€ value-basedë‚˜ policy-based ê¸°ë°˜ì˜ ë°©ë²•ë“¤ê³¼ í•¨ê»˜ ìµœê·¼ì—ëŠ” ì¸ê³µì‹ ê²½ë§ì˜ gradientê¸°ë²•ì„ ì´ìš©í•˜ì—¬ ë°œì „í•´ë‚˜ê°€ê³  ìˆìŠµë‹ˆë‹¤. MPCì™€ RLì˜ ë¹„êµëŠ” ìµœê·¼ ICRAì™€ ê°™ì€ ë¡œë´‡ ì œì–´ ê´€ë ¨ í•™íšŒë“¤ì—ì„œëŠ” ê´€ì‹¬ì´ ë§ì€ ì£¼ì œì´ë©° <a href="https://youtu.be/veXcohbFxKQ">Michiel van de Panne (UBC)</a> êµìˆ˜ë‹˜ì˜ ë°œí‘œì—ì„œ ì¢€ ë” ìì„¸íˆ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/uQrghrc.jpg" class="img-fluid"></p>
</section>
<section id="locomotion-vs-recovery" class="level2">
<h2 class="anchored" data-anchor-id="locomotion-vs-recovery">Locomotion VS Recovery</h2>
<p>ì´ëŸ° ê°•í™”í•™ìŠµ ë°©ë²•ë¡ ìœ¼ë¡œ 4ì¡±ë³´í–‰ì˜ <strong>Recovery Task</strong>ë¥¼ í’€ê¸° ìœ„í•´ì„œëŠ” Recovery taskì— ëŒ€í•œ íŠ¹ì„±ì„ ì¢€ ë” ì‚´í´ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì¡±í˜•(Legged) ë¡œë´‡ë“¤ì€ <strong>ì•ˆì •ì ì¸ ë³´í–‰(Locomotion)ì„ ê¸°ë°˜ìœ¼ë¡œ</strong> ì—¬ëŸ¬ê°€ì§€ taskë¥¼ í•˜ëŠ”ë°ì— ì´ˆì ì´ ë§ì¶°ì ¸ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ë³´í–‰ë¡œë´‡ì˜ ìœ„ì— Manipulatorë¥¼ ë‹¬ì•„ì„œ ì›í•˜ëŠ” ìœ„ì¹˜ë¡œ ë³´í–‰ì„ í•œ ë’¤ Manipulatorë¡œ ì»µì„ ì§‘ëŠ” ì¼ê³¼ ê°™ì€ taskë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ 4ì¡±ë³´í–‰ ë¡œë´‡ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì „ì œëœ <code>ì•ˆì •ì ì¸ ë³´í–‰</code>ì´ ì‹¤ì œë¡œ ë¡œë´‡ì´ ìš´ìš©ë˜ëŠ” í™˜ê²½ì—ì„œëŠ” ì—¬ëŸ¬ê°€ì§€ ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ë³€ìˆ˜ë“¤ë¡œ ì¸í•´ ë§Œì¡±ë  ìˆ˜ ì—†ëŠ” ì¡°ê±´ì¼ ìˆ˜ ìˆìœ¼ë©° ë”°ë¼ì„œ ë¡œë´‡ì´ ë„˜ì–´ì§ˆ ìˆ˜ ë°–ì— ì—†ë‹¤ë©´ ë‹¤ì‹œ ë³´í–‰ì„ í•  ìˆ˜ ìˆëŠ” ì •ìƒì ì¸ ìƒíƒœë¡œ ëŒì•„ì˜¤ê¸° ìœ„í•œ ëŠ¥ë ¥ë„ ê°–ì¶”ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ë°”ë¡œ ì´ë¥¼ ìœ„í•œ ë¡œë´‡ì˜ ê¸°ëŠ¥ì„ Recoveryë¼ê³  í•  ìˆ˜ ìˆê³  Recoveryë¥¼ Locomotion taskì™€ ë¹„êµí•˜ì—¬ íŠ¹ì§• ëª‡ê°€ì§€ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/FGwOkTa.jpg" class="img-fluid"></p>
<p>ìš°ì„  RecoveryëŠ” ì•ì„œ ì´ì•¼ê¸°í•œ ê²ƒê³¼ ê°™ì´ Locomotionì´ ë©”ì¸ì´ ë˜ëŠ” taskì¸ë° ë°˜í•´, ë¡œë´‡ì˜ ìš´ìš© life cycleì„ ìœ„í•œ <strong>support task</strong>ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¡œë´‡ì´ ì ìš©ë˜ëŠ” í˜„ì¥ì—ì„œ ë©”ì¸ taskë“¤ì„ ëŠì„ì—†ì´ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ íë¦„ì„ ìœ ì§€ì‹œì¼œì£¼ëŠ” ì¥ì¹˜ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ Locomotionì€ ë³´í–‰ì„ í•  ë•Œ ë¡œë´‡ ë‹¤ë¦¬ì˜ ì›€ì§ì„ì´ ì£¼ê¸°(period)ë¥¼ ê°€ì§€ëŠ” Cyclicí•œ ëª¨ì…˜ì„ í•˜ëŠ” ê²ƒì— ë°˜í•´ RecoveryëŠ” ë„˜ì–´ì§„(Fall) ìì„¸ë¡œë¶€í„° ë‹¤ì‹œ ê±¸ì„ ìˆ˜ ìˆëŠ” ì„œìˆëŠ”(Stand) ìì„¸ë¡œ ê°€ê¸° ìœ„í•œ ëª¨ì…˜ì„ ì·¨í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— Non-cyclicí•˜ê³  case-by-caseë¡œ ë‹¤ì–‘í•œ íšŒë³µ ëª¨ì…˜ë“¤ì„ í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ Locomotionì€ í™˜ê²½ì— ë”°ë¼(ì§€ë©´ì˜ ë§ˆì°°ë ¥ì´ë‚˜ ì™¸ë ¥ ë“±) ë³´í–‰ì˜ ë‚œì´ë„ê°€ ë‹¬ë¼ì§€ê¸´ í•˜ì§€ë§Œ ë¡œë´‡ì˜ jointì˜ ë™ì‘ ë²”ìœ„, ì¦‰ actionì˜ search spaceë¡œ ìƒê°í–ˆì„ ë•Œ Recoveryì— ë¹„í•´ ì¢€ ë” ì¢ì€ search spaceë¥¼ ê°€ì§€ê³  ìˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ Locomotionì„ ìˆ˜í–‰í•  ë•Œ ì°¸ê³ í•  ìˆ˜ ìˆëŠ” ë™ë¬¼ì´ë‚˜ ì‚¬ëŒì˜ ëª¨ì…˜ ë°ì´í„°ë“¤ì´ ìˆì§€ë§Œ Recovery ê°™ì€ ê²½ìš° ì°¸ê³ í•  ìˆ˜ ìˆëŠ” ëª¨ì…˜ ë°ì´í„°ë“¤ì´ ë§ì´ ì—†ê³  ì¼ì–´ë‚˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë©”ë‰´ì–¼ ê°™ì´ ê°ê°ì˜ ë‹¨ê³„ë¥¼ ëª…ì‹œí•˜ê¸° ê¹Œë‹¤ë¡­ë‹¤ëŠ” ì ì´ ìˆìŠµë‹ˆë‹¤.</p>
</section>
</section>
<section id="method" class="level1">
<h1>Method</h1>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>ë…¼ë¬¸ì—ì„œ ì œì‹œí•œ ì „ì²´ì ì¸ Control Systemì˜ ëª¨ìŠµì€ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ìŠµë‹ˆë‹¤. ê°•í™”í•™ìŠµ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œëŠ” TRPO(Trust Region Policy Optimization algorithm)ì™€ GAE(Generalized Advantage Estimator)ë¥¼ ì‚¬ìš©í–ˆìœ¼ë©° ì œì‹œëœ ë°©ë²•ì—ì„œëŠ” í¬ê²Œ 3ê°€ì§€ íŠ¹ì§•ë“¤ì´ ìˆìŠµë‹ˆë‹¤.</p>
<ol type="1">
<li><p><strong>Control Task Decomposed</strong> : Recoveryí•˜ëŠ” taskë¥¼ 3ê°œë¡œ Behaviorë“¤ë¡œ ë‚˜ëˆ„ì–´ì„œ ê°ê°ì˜ Behaviorë¥¼ ìˆ˜í–‰í•˜ëŠ” Control Policyë¥¼ í•™ìŠµ</p></li>
<li><p><strong>Hierarchical Structure</strong> : ì—¬ëŸ¬ê°œì˜ Behavior policiesë¥¼ ì¡°ìœ¨í•  ìˆ˜ ìˆëŠ” ìƒìœ„ê³„ì¸µì˜ Behavior Selectorë¥¼ ë§Œë“¤ì–´ì„œ ê³„ì¸µì ì¸ êµ¬ì¡°ë¥¼ ì‚¬ìš©</p></li>
<li><p><strong>Height Estimator</strong> : ë¡œë´‡ì„ ì‹¤ì œ ìš´ìš©í•  ë•Œ í•„ìš”í•œ ìƒíƒœ ì •ë³´ì¸ Height ê°’ì˜ ë¶€ì •í™•í•œ ì •ë³´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ Neural Network ì‚¬ìš©(Regression model)</p></li>
</ol>
<p><img src="https://i.imgur.com/QWzlTnh.jpg" class="img-fluid"></p>
</section>
<section id="behavior-policies" class="level2">
<h2 class="anchored" data-anchor-id="behavior-policies">Behavior Policies</h2>
<p>Recovery taskë¥¼ ì—¬ëŸ¬ê°œì˜ Behaviorë“¤ë¡œ ë‚˜ëˆ„ì–´ì„œ ì´ 3ê°œì˜ ê°ê°ì˜ task, <strong>Self-Righting, Standing up, Locomotion</strong>ê°€ ìˆê³  ê° behaviorì„ ë‹´ë‹¹í•˜ëŠ” policyê°€ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/Gvm4aLq.jpg" class="img-fluid"></p>
<p><strong>Self-Righting</strong>ì€ ì„ì˜ì˜ ë¡œë´‡ì˜ ë„˜ì–´ì§„ ìì„¸ì—ì„œ ë¡œë´‡ì˜ ëª¸ì²´(base)ê°€ ë˜‘ë°”ë¡œ(ë’¤ì§‘ì–´ì ¸ ìˆê±°ë‚˜ ì˜†ìœ¼ë¡œ ëŒì•„ê°€ ìˆì§€ ì•Šì€ ìƒíƒœ) ë˜ì–´ ìˆê³  4ê°œì˜ ë°œì´ ì§€ë©´ì— ë‹¿ì•„ ìˆëŠ” ìì„¸ë¡œ ì›€ì§ì´ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. <strong>Standing up</strong>ì€ <code>Self-righting</code>ì—ì„œ ë§Œë“  ìì„¸ì—ì„œ 4ê°œì˜ ë‹¤ë¦¬ë“¤ì„ ì´ìš©í•˜ì—¬ ì¼ì–´ì„  ìì„¸ë¡œ ë§Œë“œëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ <strong>Locmotion</strong>ì€ Controllerì—ì„œ ì£¼ëŠ” commandë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë³´í–‰ì„ í•˜ëŠ” ê²ƒì„ ë§í•˜ë©° ì´ë•Œ commandë¡œëŠ” <code>forward velocity</code>, <code>lateral velocity</code>, <code>turing rate(yaw ë°©í–¥)</code>ì„ ì£¼ì–´ ì›€ì§ì´ê²Œ ë©ë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/sCu9NHq.jpg" class="img-fluid"></p>
<p><strong>(1)Self-righting behavior</strong></p>
<p>Self-rightingì„ í•™ìŠµí•˜ê¸° ìœ„í•´ policyì— ë“¤ì–´ê°€ëŠ” data(state ì •ë³´)ë¡œëŠ” ì•„ë˜ì˜ í‘œì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´ ì´ 6ê°œì˜ dataê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ ì¤‘ <span class="math inline">e_g</span>ëŠ” ëª¸ì²´ baseì˜ z ë°©í–¥ìœ¼ë¡œì˜ ë‹¨ìœ„ ë²¡í„°ë¡œ ëª¸ì²´ì˜ uprightë¥¼ íŒë‹¨í•˜ê¸° ìœ„í•œ ì •ë³´ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/o3h1UAQ.jpg" class="img-fluid"></p>
<p>ë³´í†µ ê°•í™”í•™ìŠµì—ì„œëŠ” rewardë¥¼ ìµœëŒ€í™” í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ í•™ìŠµ(ìµœì í™”)ì´ ì¼ì–´ë‚˜ì§€ë§Œ rewardì˜ ë°˜ëŒ€ ê°œë…ì¸ costì˜ ê°’ì´ ìµœì†Œí™”í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ í•™ìŠµì„ ì‹œì¼°ìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ì‹ì²˜ëŸ¼ ì—¬ëŸ¬ê°œì˜ cost termë“¤ì´ ìˆì§€ë§Œ ê·¸ ì¤‘ self-rightingì—ì„œ íŠ¹ì§•ì ì¸ cost termì€ <strong>orientation cost term</strong> ì…ë‹ˆë‹¤. ì´ cost termì€ <span class="math inline">c_o=\left\|[0,0,-1]^T-e_g\right\|</span>ë¡œ ê³„ì‚°ë˜ëŠ”ë° ì´ëŠ” ìœ„ì—ì„œ ì„¤ëª…í•œ ëŒ€ë¡œ policy networkê°€ ë¡œë´‡ ëª¸ì²´ì˜ baseì˜ ë°©í–¥ì„ uprighting í•˜ë„ë¡ í•™ìŠµë˜ê²Œ í•˜ê¸° ìœ„í•œ termì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/YXoKK18.png" class="img-fluid"></p>
<p><strong>(2)Standing up behavior</strong></p>
<p>Standing upì€ ì´ì „ì˜ Self-rightingì˜ state ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ë”í•˜ì—¬ <code>Base linear velocity</code> ì •ë³´ê¹Œì§€ í¬í•¨í•˜ì—¬ policyì˜ inputìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ë©ë‹ˆë‹¤. Self-rightingê³¼ Standing up policy ê°„ì˜ state ì •ë³´ í¬í•¨ ê´€ê³„ ë¿ë§Œ ì•„ë‹ˆë¼ ì´í›„ ì†Œê°œí•  Locomotion policy, Behavor Selectorì˜ state ì •ë³´ì˜ ì§‘í•©ê´€ê³„ë¥¼ ë³´ë©´ ë‹¤ë¥¸ policyì— ë“¤ì–´ê°€ëŠ” ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ì¶”ê°€ì ì¸ dataë¥¼ ë”í•˜ì—¬ì„œ <code>Self-righting</code> â†’ <code>Standing up</code> â†’ <code>Locomotion</code> â†’ <code>Behavior Selector</code> ìˆœìœ¼ë¡œ state spaceê°€ ì ì  ë” ì»¤ì ¸ê°€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/M33WofE.jpg" class="img-fluid"></p>
<p>Staning up behavior policyê°€ í•™ìŠµí•´ì•¼í•  cost ìµœì†Œí™” ì‹ì€ ì•„ë˜ì™€ ê°™ì´ ì—¬ëŸ¬ cost termë“¤ì´ ìˆì§€ë§Œ ê·¸ì¤‘ <strong>height cost term</strong>ì´ íŠ¹ì§•ì ì¸ costë¼ê³  ë³¼ ìˆ˜ ìˆìœ¼ë©° ANYmal ë¡œë´‡ì´ ì„œìˆì„ ë•Œì˜ ì§€ë©´ìœ¼ë¡œë¶€í„° ëª¸ì²´(base frame)ê¹Œì§€ì˜ ê±°ë¦¬, heightì´ 0.35më³´ë‹¤ ì‘ì„ì‹œì—ëŠ” 1, ì•„ë‹ˆë©´ 0ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/7Qdyrao.png" class="img-fluid"></p>
<p><strong>(3)Locomotion behavior</strong></p>
<p>Locomotion task policyì—ëŠ” inputìœ¼ë¡œ commandê¹Œì§€ ë“¤ì–´ê°€ê²Œ ë˜ë©´ì„œ costì‹ì—ëŠ” commandë¥¼ ì˜ ìˆ˜í–‰í•˜ëŠ”ì§€ íŒë‹¨í•˜ë„ë¡ í•˜ëŠ” <strong>angular velocity, linear velocity, foot clearance, foot slippage cost</strong>ê°€ ë“¤ì–´ê°€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/v96Lakr.jpg" class="img-fluid"></p>
<p>ì§€ê¸ˆê¹Œì§€ policy networkë“¤ì˜ inputì™€ objective(=cost ìµœì†Œí™”)ì— ëŒ€í•´ì„œ ì´ì•¼ê¸° í–ˆì§€ë§Œ ê²°ê³¼ì ìœ¼ë¡œ <strong>networkê°€ ì–´ë–¤ ê°’ë“¤ì„ output í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ì‹¤ì œë¡œ ê·¸ outputìœ¼ë¡œ ì–´ë–»ê²Œ ë¡œë´‡ì„ ì›€ì§ì´ëŠ”ì§€</strong>ì— ëŒ€í•´ì„œëŠ” ì•„ì§ ì„¤ëª…í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¡œë´‡ì„ ì›€ì§ì´ê¸° ìœ„í•´ì„œëŠ” timestepë§ˆë‹¤ ë¡œë´‡ì˜ ê° ëª¨í„°ê°€ ì›€ì§ì—¬ì•¼ í•˜ëŠ” <strong>desired joint position</strong>ì„ êµ¬í•´ì„œ í•´ë‹¹ positionìœ¼ë¡œ ëª¨í„°ë¥¼ ëŒë ¤ì£¼ë©´ ë©ë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/vpQMjaM.jpg" class="img-fluid"></p>
<p>ê° Behavior policyì—ì„œ ë‚˜ì˜¤ëŠ” outputì€ <span class="math inline">o_t</span>ì´ë©° ì´ëŠ” ë¡œë´‡ì„ êµ¬ë™ì‹œí‚¤ëŠ” 12ê°œì˜ joint motorì— <code>ëŒ€ì‘</code>í•˜ëŠ” ì‹¤ìˆ˜ ë²¡í„°ì…ë‹ˆë‹¤. <code>ëŒ€ì‘</code>ì´ë¼ê³  í‘œí˜„í•œ ì´ìœ ëŠ” í•´ë‹¹ ì‹¤ìˆ˜ê°’ì„ ë°”ë¡œ jointì˜ desired positionìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì¢€ ë” ë¹ ë¥¸ í•™ìŠµ ìˆ˜ë ´ì„ ìœ„í•´ desired joint positionì„ êµ¬í•˜ëŠ” ì‹ì„ ê±°ì³ ê³„ì‚°ëœ ê°’ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ìš°ì„  <code>Self-righting</code>ê³¼ <code>Standing up</code> taskì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ì—ì„œ ë‚˜ì˜¨ ê°’ <span class="math inline">o_t</span>ë¥¼ í˜„ì¬ ê° ëª¨í„°ì˜ positionì¸ <span class="math inline">\phi_t</span>ì— ë”í•´ì£¼ì–´ì„œ ìµœì¢… desired joint positionì¸ <span class="math inline">\phi_d</span> ê°’ìœ¼ë¡œ ì œì–´í•©ë‹ˆë‹¤. <code>Locomotion</code>ì—ì„œëŠ” í˜„ì¬ì˜ joint position ëŒ€ì‹ , ë¡œë´‡ì´ ì„œìˆëŠ” ìì„¸ì¸ nominal joint configuration <span class="math inline">\phi_n</span>ì— <span class="math inline">o_t</span>ì„ ë”í•´ì£¼ì–´ ìµœì¢… desired joint positionì¸ <span class="math inline">\phi_d</span>ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.(<span class="math inline">o_t</span>ì— ê³±í•´ì§€ëŠ” <span class="math inline">k</span>ëŠ” í•˜ì´í¼íŒŒë¼ë¯¸í„°ì²˜ëŸ¼ ì°¾ì•„ì•¼ í•˜ëŠ” ìƒìˆ˜ê°’ì…ë‹ˆë‹¤.)</p>
<p><img src="https://i.imgur.com/MtyoB9j.jpg" class="img-fluid"></p>
</section>
<section id="height-estimator" class="level2">
<h2 class="anchored" data-anchor-id="height-estimator">Height Estimator</h2>
<p>data-driven RLì—ì„œ policyì— ë“¤ì–´ê°€ëŠ” dataì˜ qualityëŠ” ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì‹¤ì œ ì‘ë™í•˜ëŠ” ë¡œë´‡ì˜ stateë¥¼ ì¶”ì •í•˜ëŠ” State estimation ë˜í•œ ë¡œë´‡ì— RLì„ ì ìš©í•˜ê¸° ìœ„í•´ì„œ ë—„ë ˆì•¼ ë—„ìˆ˜ ì—†ëŠ” ì¤‘ìš”í•œ ë¶€ë¶„ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¡œë´‡ì— ëª¨ì…˜ ìº¡ì³ì™€ ê°™ì€ ì„¼ì„œë¥¼ ë¶€ì°©í•˜ì§€ ì•ŠëŠ”í•œ ì‹¤ì œ ë¡œë´‡ì˜ base heightê°’ì„ ì˜ ì•Œ ìˆ˜ ì—†ê³  ë¡œë´‡ì´ ì •ìƒì ìœ¼ë¡œ ë³´í–‰í•  ë•ŒëŠ” <a href="https://ieeexplore.ieee.org/document/8118116">TSIF(Two State Implicit Filter)</a>ì™€ ê°™ì€ State Estimation ê¸°ë²•ì„ í†µí•´ ì–´ëŠì •ë„ ì¶”ì •í•  ìˆ˜ ìˆì§€ë§Œ ë„˜ì–´ì ¸ì„œ baseê°€ ê±°ì˜ ë°”ë‹¥ê³¼ ê°€ê¹Œìš¸ ê²½ìš° ì¶”ì •ê°’ì´ ë§¤ìš° ë¶ˆì•ˆì •í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ í•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” Regression Neural Networkë¥¼ í†µí•´ heightë¥¼ ë„˜ì–´ì§„ ìƒíƒœì—ì„œë„ ì˜ ì¶”ì •í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/gJiawCh.jpg" class="img-fluid"></p>
<p>Height Estimator Networkê°€ inputìœ¼ë¡œ ë°›ëŠ” dataëŠ” ì•„ë˜ì˜ í‘œì™€ ê°™ìŠµë‹ˆë‹¤. Outputìœ¼ë¡œëŠ” bodyì˜ IMU ê°’ê³¼ 12ê°œ jointë“¤ì˜ positionì„ ì¶œë ¥í•˜ì—¬ í•´ë‹¹ ê°’ë“¤ì„ ê°€ì§€ê³  forward kinematicsë¥¼ ì´ìš©í•˜ì—¬ êµ¬í•œ height ê°’ì„ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì¶”ì •í•œ ê°’ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ ì‹ ê²½ë§ì€ ê°•í™”í•™ìŠµìœ¼ë¡œ í•™ìŠµì„ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì§€ë„í•™ìŠµ ë°©ë²•ìœ¼ë¡œ true ê°’ì„ ë§ì¶°ê°€ëŠ” ê³¼ì •ì„ í†µí•´ í•™ìŠµí•˜ê²Œ ë˜ëŠ”ë° ì´ë–„ true dataëŠ” ì‹œë®¬ë ˆì´ì…˜ ìƒì—ì„œëŠ” ì‰½ê²Œ êµ¬í•  ìˆ˜ ìˆê³  Regression modelì˜ loss ê°’ì€ <span class="math inline">\sum_{j=0}^K\left\|h_j-h_\psi\left(s_j\right)\right\|^2</span>ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤. (<span class="math inline">j</span>: joint index, <span class="math inline">s_j</span>: joint state, <span class="math inline">\psi</span>: network parameter)</p>
<p><img src="https://i.imgur.com/lRW3DpP.jpg" class="img-fluid"></p>
</section>
<section id="behavior-selector" class="level2">
<h2 class="anchored" data-anchor-id="behavior-selector">Behavior Selector</h2>
<p>ì—¬ëŸ¬ê°œì˜ behavior policyë“¤ì„ ì–´ë–»ê²Œ ì¡°ìœ¨í•  ê²ƒì¸ì§€ëŠ” ìƒìœ„ ê³„ì¸µì— Behavior Selectorë¥¼ NNì„ ì´ìš©í•˜ì—¬ ë§Œë“¤ì–´ì„œ í•™ìŠµì‹œí‚µë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/H89nNSQ.jpg" class="img-fluid"></p>
<p>ë¡œë´‡ì˜ ìƒí™©ì— ë§ì¶”ì–´ì„œ ì ì ˆí•œ behavoirë¥¼ í•˜ë„ë¡ behavior selectorëŠ” categorical distributionì„ í•™ìŠµí•˜ê²Œ ë©ë‹ˆë‹¤. Behavior selectorì™€ ì•ì„œ ì„¤ëª…í•œ Height estimatorëŠ” 3ê°œì˜ behavior policyë“¤ì´ ë‹¤ í•™ìŠµì´ ëœ í›„ì— ì•„ë˜ ê·¸ë¦¼ì˜ ì˜¤ë¥¸ìª½ì— ë³´ì´ëŠ” Algorithm1ì˜ íë¦„ì— ë”°ë¼ í•™ìŠµë˜ê²Œ ë©ë‹ˆë‹¤. Behavior selelctorì˜ state ë‚˜costëŠ” locomotionê³¼ ë§¤ìš° ìœ ì‚¬í•˜ê³  í•´ë‹¹ í¬ìŠ¤íŠ¸ì˜ appendixì— í‘œë¡œ ì •ë¦¬ë˜ì–´ ìˆìœ¼ë©° costì‹ ê°™ì€ ê²½ìš°ì—ë„ ëª¨í„°ì˜ power efficiencyë¥¼ ìœ„í•œ term ì •ë„ ì¶”ê°€ëœ ê²ƒì´ê¸° ë•Œë¬¸ì— í•´ë‹¹ cost ì‹ì´ ê¶ê¸ˆí•˜ì‹ ë¶„ì€ ì›ë¬¸ ë…¼ë¬¸ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/iarCOdq.png" class="img-fluid"></p>
</section>
<section id="simulating-anymal" class="level2">
<h2 class="anchored" data-anchor-id="simulating-anymal">Simulating ANYmal</h2>
<p>ë¡œë´‡ì— ê°•í™”í•™ìŠµì„ ì ìš©í•  ë•Œ í° ì´ìŠˆë“¤ ì¤‘ í•˜ë‚˜ëŠ” <strong>Sim-to-Real</strong>ì…ë‹ˆë‹¤. ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ì‹¤ì œ í™˜ê²½ì„ ë‹¨ìˆœí™”í•˜ê³  ëª¨ì‚¬í•œ ê²ƒì´ê¸° ë–„ë¬¸ì— ì‹œë®¬ë ˆì´ì…˜ì—ì„œ ì˜ í•™ìŠµì´ë˜ê³  ì˜ ë™ì‘í•˜ë”ë¼ë„ ì‹¤ì œ ë¡œë´‡ì„ deployí–ˆì„ë•Œ ì˜ ì‘ë™í•˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìƒê¹ë‹ˆë‹¤. ë”°ë¼ì„œ ì‹¤ì œ í™˜ê²½ì—ì„œë„ ë¡œë´‡ì´ ê²½í—˜í•˜ê²Œ ë˜ëŠ” noiseë“¤ì„ ì‹œë®¬ë ˆì´ì…˜ì—ë„ randomí•˜ê²Œ ì ìš©ì‹œì¼œ ìµœëŒ€í•œ ì‹¤ì œ ìƒí™©ê³¼ë„ ìœ ì‚¬í•˜ê²Œ ë§Œë“  í™˜ê²½ì—ì„œ í•™ìŠµì„ í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>í•´ë‹¹ ë…¼ë¬¸ì—ì„œë„ Link length, Intertial property, Link mass, CoM(Center of Mass), Collision geometry, Coefficient of friction ë“±ê³¼ ê°™ì´ ë¬¼ë¦¬ì ì¸ ê°’ë“¤ì„ ì•„ë˜ í‘œì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´ ì¼ì • ë²”ìœ„ì—ì„œ randomí•˜ê²Œ ê°’ì„ ë„£ì–´ì£¼ì—ˆê³  policyì˜ input dataê°€ ë˜ëŠ” observation ê°’ë“¤ì—ë„ noise ê°’ì„ ì¶”ê°€í•˜ì—¬ Sim-to-Real ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ì™¸ì—ë„ ANYmal ë¡œë´‡ í”Œë«í¼ì—ì„œ ì‚¬ìš©í•˜ëŠ” SEA motorì— ìŠ¤í”„ë§ê³¼ ê°™ì€ ê¸°ê³„ì  ìš”ì†Œë“¤ì˜ ë³€ìˆ˜ë¡œ ì¸í•œ ì œì–´ ì´ìŠˆë„ í•´ê²°í•˜ê¸° ìœ„í•´ <code>Actuator Network</code>ë¥¼ í•™ìŠµì‹œì¼œ ì´ë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/Cax4bsA.jpg" class="img-fluid"></p>
<p>(ìœ„ ìš”ì•½ì—ì„œ ì–¸ê¸‰í–ˆë˜ ëŒ€ë¡œ ì‚¬ì‹¤ìƒ Actuator Networkë‚˜ Height Estimatorê¹Œì§€ NNì´ ì¶”ê°€ë˜ë¯€ë¡œ 4ê°œê°€ ì•„ë‹Œ ì´ 6ê°œì˜ NNì´ ì‚¬ìš©ë˜ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)</p>
</section>
</section>
<section id="result-and-discussion" class="level1">
<h1>Result and Discussion</h1>
<p>ë…¼ë¬¸ì—ì„œ ì„¤ê³„í•œ Recovery Controllerì˜ ì‹¤í—˜ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ì´ (1) Recovery ì„±ê³µë¥ , (2) Height Estimatorì˜ ìƒíƒœ ì¶”ì • íš¨ê³¼, (3) Behavior Selectorì˜ (ê¸°ì¡´ ë°©ë²•ë¡ ì¸ State Machineê³¼ ë¹„êµí–ˆì„ ë•Œì˜) ê²½ìŸë ¥ 3ê°€ì§€ë¡œ ì‚´í´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<section id="the-success-of-recovery" class="level2">
<h2 class="anchored" data-anchor-id="the-success-of-recovery">The success of recovery</h2>
<p>Recovery ì‹¤í—˜ì€ ì´ 2ê°€ì§€ë¡œ ì§„í–‰ë˜ì—ˆëŠ”ë° ì²«ë²ˆì§¸ëŠ” ì§€ë©´ì— ë¡œë´‡ì„ ì„ì˜ì˜ positionìœ¼ë¡œ ë„˜ì–´ì§„ ìƒí™©ì„ ì—°ì¶œí•œ í›„ 5ì´ˆ ì´ë‚´ë¡œ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ”ì§€ë¥¼ í™•ì¸í–ˆê³  ë‘ë²ˆì§¸ë¡œëŠ” ë¡œë´‡ì´ ê±·ê³  ìˆì„ ë•Œ ë°œë¡œ ì³ì„œ ë„˜ì–´ëœ¨ë¦°í›„ ë¡œë´‡ì´ ë‹¤ì‹œ ìì—°ìŠ¤ëŸ½ê²Œ(ê° behaviorë“¤ ê°„ì˜ switchingì´ ìì—°ìŠ¤ëŸ½ê²Œ) ì¼ì–´ë‚˜ëŠ”ì§€ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ê°ê°ì˜ ì‹¤í—˜ ëª¨ë‘ 50ë²ˆ ì´ìƒì”© ì§„í–‰í–ˆìœ¼ë©°ì´ë•Œ ì•½ 100ë²ˆì¤‘ 97ë²ˆì„ ì„±ê³µí•˜ì—¬ 97% ì„±ê³µë¥ ì„ ë³´ì˜€ìŠµë‹ˆë‹¤. (ì‹¤íŒ¨í•œ ì¼€ì´ìŠ¤ë“¤ì˜ ê²½ìš°ì—ëŠ” jointì˜ positionì´ <span class="math inline">2\pi</span>ë¥¼ ë„˜ì–´ê°€ëŠ” ê°’ìœ¼ë¡œ ë‚˜ì˜¬ ë•Œ ì˜ ì‘ë™í•˜ì§€ ì•Šì•˜ë‹¤ê³  í•©ë‹ˆë‹¤.)</p>
<p><img src="https://i.imgur.com/FnkqCfc.jpg" class="img-fluid"></p>
</section>
<section id="the-effectiveness-of-height-estimator" class="level2">
<h2 class="anchored" data-anchor-id="the-effectiveness-of-height-estimator">The effectiveness of Height Estimator</h2>
<p>ê¸°ì¡´ì˜ State Estimator TSIF(Two State Implicit Filter)ë§Œì„ ì‚¬ìš©í–ˆì„ ë•ŒëŠ” ë¡œë´‡ì´ ë°”ë‹¥ì— ë„˜ì–´ì ¸ ìˆì„ ê²½ìš° error ê°’ì´ ë§¤ìš°ì»¸ì§€ë§ˆë‚˜ Neural Networkë¥¼ í†µí•´ ë³´ì •í–ˆì„ ë•Œ ì˜¤ì°¨ê°€ 1cm ë¯¸ë§Œìœ¼ë¡œ ë–¨ì–´ì§€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì˜¤ë¥¸ìª½ì˜ height ê·¸ë˜í”„ëŠ” ë§¨ ì•„ë˜ ìº¡ì³ë˜ì–´ìˆëŠ” ë¡œë´‡ì˜ ì¼ë ¨ì˜ ëª¨ì…˜ê³¼ì • ì¤‘ì— heightë¥¼ ê·¸ë˜í”„ë¡œ plottingí•œ ê²ƒì¸ë° simulation(ì´ˆë¡ìƒ‰)ì´ trueê°’ì´ë©°, TSIFë§Œì„ ì‚¬ìš©í–ˆì„ ë•Œ(íŒŒë€ìƒ‰)ëŠ” ë¡œë´‡ì´ ë„˜ì–´ì ¸ìˆì„ ë•Œ ì˜¤ì°¨ê°€ í°ë° ë°˜í•´ neural network(ì£¼í™©ìƒ‰)ì€ simulation dataì™€ ê±°ì˜ ê°™ìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/VCag54i.jpg" class="img-fluid"></p>
</section>
<section id="the-competitiveness-of-beahavior-selector" class="level2">
<h2 class="anchored" data-anchor-id="the-competitiveness-of-beahavior-selector">The competitiveness of Beahavior Selector</h2>
<p>ê¸°ì¡´ì˜ ì œì–´ë°©ë²•ë“¤ì—ì„œëŠ” ì—¬ëŸ¬ê°€ì§€ modeë¥¼ ì¡°ìœ¨í•˜ê¸° ìœ„í•´ì„œ FSM(Finite State Machine)ì„ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. íŠ¹ì • ì¡°ê±´ì„ ifì— ë„£ì–´ì£¼ì–´ì„œ ê° modeë¥¼ transitioní•˜ëŠ” ê¸°ë²•ì¸ë° ë…¼ë¬¸ì—ì„œë„ ê°•í™”í•™ìŠµìœ¼ë¡œ í•™ìŠµí•œ Behavior Selectorì˜ ë¹„êµë¥¼ ìœ„í•´ ê¸°ì¡´ì˜ FSM ë°©ì‹ì„ í™œìš©í•˜ì—¬ State Machineì„ ë§Œë“¤ì–´ì„œ ë¹„êµí–ˆìŠµë‹ˆë‹¤. FSM ë°©ì‹ì€ ì—¬ì „íˆ corner caseë“¤ì´ Behavior Selectorì— ë¹„í•´ ë§ì´ ì¡´ì¬í–ˆê³  ê° behaviorë“¤ ê°„ì˜ ì „í™˜ë„ ìì—°ìŠ¤ëŸ½ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
<p><img src="https://i.imgur.com/zuUo93r.jpg" class="img-fluid"></p>
<p><strong>Review</strong></p>
<blockquote class="blockquote">
<p>ì•„ì§ minor í•œ ì£¼ì œì¸ Recovery taskì— ëŒ€í•´ ì§‘ì¤‘ì ìœ¼ë¡œ ì˜ ë¶„ì„í•˜ê³  ì„±ê³¼ë„ í™•ì‹¤íˆ ë³´ì—¬ì¤€ ë…¼ë¬¸ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. Control systemì„ workingí•˜ê²Œ í•˜ê¸° ìœ„í•´ ê° íŒŒíŠ¸ë“¤ì„ ì–´ë–»ê²Œ ì„¤ê³„í•˜ê³  í•™ìŠµí•´ì•¼í•  ì§€ ë§ì€ ê³ ë¯¼ì„ í–ˆë‹¤ëŠ” ê²ƒì„ ëŠë‚„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì—¬ì „íˆ flat groundì—ì„œë§Œ ì§„í–‰ëœ ì—°êµ¬ì´ê¸°ì— slopeê°€ ìˆëŠ” í™˜ê²½ì´ë‚˜ ë‹¤ë¥¸ objectê°€ ìˆëŠ” ì¢€ ë” ì‹¤ì œ ìƒí™©ê³¼ ë¹„ìŠ·í•œ ìƒí™©ì— ëŒ€í•œ recoveryê°€ í•´ê²°ë˜ê¸° ìœ„í•´ì„œëŠ” ì—°êµ¬ë˜ì–´ì•¼ í•  ë¶€ë¶„ì´ ì¶©ë¶„íˆ ë§ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>
</blockquote>
<details>
<summary>
<b>Appendix</b>
</summary>
<img width="100%" src="https://i.imgur.com/ehbPM3X.jpg" title="Cost Table">
</details>
<p><strong>Reference</strong></p>
<ul>
<li><p>orginal paper : <a href="https://arxiv.org/abs/1901.07517">https://arxiv.org/abs/1901.07517</a></p></li>
<li><p><a href="https://youtu.be/veXcohbFxKQ">https://youtu.be/veXcohbFxKQ</a></p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, Jung Yeon Lee</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/curieuxjy">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>