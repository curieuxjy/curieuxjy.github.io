{
  "hash": "c8d583cc7eaab85dc6ddfd7727f3f669",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"ğŸ‘©â€ğŸ’»ROS2 - hardware interface\"\ntoc: true\ndate: \"2024-11-25\"\ndescription: C++ ìŠ¤í„°ë””\ncategories: [code, c++]\n#image: ../../images/2024-01-12-quarto-blog2/blog2.jpg\n---\n\n# ì „ì²´ ì½”ë“œ\n\n\n```{cpp .code-overflow-wrap}\n#| code-fold: true\n#| code-summary: \"Show the code\"\n\n// Copyright 2020 - 2021 ros2_control Development Team\n\n#ifndef HARDWARE_INTERFACE__SYSTEM_INTERFACE_HPP_\n#define HARDWARE_INTERFACE__SYSTEM_INTERFACE_HPP_\n\n#include <limits>\n#include <memory>\n#include <string>\n#include <unordered_map>\n#include <utility>\n#include <vector>\n\n// í•˜ë“œì›¨ì–´ ì¸í„°í˜ì´ìŠ¤ì™€ ê´€ë ¨ëœ ì—¬ëŸ¬ í—¤ë” íŒŒì¼ë“¤ì„ í¬í•¨\n#include \"hardware_interface/component_parser.hpp\"\n#include \"hardware_interface/handle.hpp\"\n#include \"hardware_interface/hardware_info.hpp\"\n#include \"hardware_interface/types/hardware_interface_return_values.hpp\"\n#include \"hardware_interface/types/hardware_interface_type_values.hpp\"\n#include \"hardware_interface/types/lifecycle_state_names.hpp\"\n#include \"lifecycle_msgs/msg/state.hpp\"\n#include \"rclcpp/duration.hpp\"\n#include \"rclcpp/logger.hpp\"\n#include \"rclcpp/logging.hpp\"\n#include \"rclcpp/node_interfaces/node_clock_interface.hpp\"\n#include \"rclcpp/time.hpp\"\n#include \"rclcpp_lifecycle/node_interfaces/lifecycle_node_interface.hpp\"\n#include \"rclcpp_lifecycle/state.hpp\"\n\nnamespace hardware_interface\n{\n// ë³µì¡í•œ ì‹œìŠ¤í…œì„ ros2_controlì— í†µí•©í•  ë•Œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê°€ìƒ í´ë˜ìŠ¤\n/**\n * ì´ í´ë˜ìŠ¤ëŠ” ë‹¤ê´€ì ˆ ë¡œë´‡ì´ë‚˜ ì„¼ì„œë¥¼ í¬í•¨í•˜ëŠ” ì‹œìŠ¤í…œ ë“±ì„ ros2_controlì— í†µí•©í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.\n * \n * í•˜ë“œì›¨ì–´ì˜ ìƒíƒœëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ê³„ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n *\n * - UNCONFIGURED (on_init, on_cleanup): í•˜ë“œì›¨ì–´ëŠ” ì´ˆê¸°í™”ë˜ì—ˆìœ¼ë‚˜ í†µì‹ ì€ ì‹œì‘ë˜ì§€ ì•Šì€ ìƒíƒœ\n * - INACTIVE (on_configure, on_deactivate): í•˜ë“œì›¨ì–´ê°€ ì„¤ì •ë˜ê³  í†µì‹ ì´ ì‹œì‘ë˜ì—ˆìœ¼ë‚˜ ì›€ì§ì„ ì œì–´ëŠ” ë¹„í™œì„±í™”ëœ ìƒíƒœ\n * - FINALIZED (on_shutdown): í•˜ë“œì›¨ì–´ ì¸í„°í˜ì´ìŠ¤ê°€ ì–¸ë¡œë“œ ë˜ëŠ” íŒŒê´´ë¥¼ ì¤€ë¹„í•˜ëŠ” ìƒíƒœ\n * - ACTIVE (on_activate): í•˜ë“œì›¨ì–´ê°€ í™œì„±í™”ë˜ê³  ì‹¤ì œë¡œ ì›€ì§ì¼ ìˆ˜ ìˆëŠ” ìƒíƒœ\n */\n\nusing CallbackReturn = rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface::CallbackReturn;\n\nclass SystemInterface : public rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface\n{\npublic:\n  // ìƒì„±ì: ë¼ì´í”„ì‚¬ì´í´ ìƒíƒœì™€ ë¡œê±° ì´ˆê¸°í™”\n  SystemInterface()\n  : lifecycle_state_(rclcpp_lifecycle::State(\n      lifecycle_msgs::msg::State::PRIMARY_STATE_UNKNOWN, lifecycle_state_names::UNKNOWN)),\n    system_logger_(rclcpp::get_logger(\"system_interface\"))\n  {\n  }\n\n  // ë³µì‚¬ ìƒì„±ìë¥¼ ë¹„í™œì„±í™” (ê³ ìœ  ì†Œìœ ê¶Œì„ ê°€ì§€ë¯€ë¡œ ë³µì‚¬ ë¶ˆê°€ëŠ¥)\n  SystemInterface(const SystemInterface & other) = delete;\n\n  SystemInterface(SystemInterface && other) = default;\n\n  virtual ~SystemInterface() = default;\n\n  // í•˜ë“œì›¨ì–´ ì¸í„°í˜ì´ìŠ¤ ì´ˆê¸°í™” ë©”ì†Œë“œ\n  CallbackReturn init(\n    const HardwareInfo & hardware_info, rclcpp::Logger logger,\n    rclcpp::node_interfaces::NodeClockInterface::SharedPtr clock_interface)\n  {\n    clock_interface_ = clock_interface;\n    system_logger_ = logger.get_child(\"hardware_component.system.\" + hardware_info.name);\n    info_ = hardware_info;\n    return on_init(hardware_info);\n  };\n\n  // í•˜ë“œì›¨ì–´ ì´ˆê¸°í™”ë¥¼ ìœ„í•œ ê°€ìƒ ë©”ì†Œë“œ (í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„)\n  virtual CallbackReturn on_init(const HardwareInfo & hardware_info)\n  {\n    info_ = hardware_info;\n    parse_state_interface_descriptions(info_.joints, joint_state_interfaces_);\n    parse_state_interface_descriptions(info_.sensors, sensor_state_interfaces_);\n    parse_state_interface_descriptions(info_.gpios, gpio_state_interfaces_);\n    parse_command_interface_descriptions(info_.joints, joint_command_interfaces_);\n    parse_command_interface_descriptions(info_.gpios, gpio_command_interfaces_);\n    return CallbackReturn::SUCCESS;\n  };\n\n  // ìƒíƒœ ì¸í„°í˜ì´ìŠ¤ ë‚´ë³´ë‚´ê¸°\n  [[deprecated(\n    \"Replaced by vector<StateInterface::ConstSharedPtr> on_export_state_interfaces() method. \"\n    \"Exporting is handled \"\n    \"by the Framework.\")]] virtual std::vector<StateInterface>\n  export_state_interfaces()\n  {\n    return {};\n  }\n\n  // URDF íŒŒì¼ì— ì •ì˜ë˜ì§€ ì•Šì€ ì‚¬ìš©ì ì •ì˜ ìƒíƒœ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‚´ë³´ë‚´ê¸° ìœ„í•œ ë©”ì†Œë“œ\n  virtual std::vector<hardware_interface::InterfaceDescription>\n  export_unlisted_state_interface_descriptions()\n  {\n    return {};\n  }\n\n  // ìƒíƒœ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ë‚´ë³´ë‚´ëŠ” ë©”ì†Œë“œ\n  std::vector<StateInterface::ConstSharedPtr> on_export_state_interfaces()\n  {\n    // ì‚¬ìš©ì ì •ì˜ ìƒíƒœ ì¸í„°í˜ì´ìŠ¤ ê°€ì ¸ì˜¤ê¸°\n    std::vector<hardware_interface::InterfaceDescription> unlisted_interface_descriptions =\n      export_unlisted_state_interface_descriptions();\n\n    // ìƒíƒœ ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ë²¡í„°ì— ì €ì¥ í›„ ë°˜í™˜\n    std::vector<StateInterface::ConstSharedPtr> state_interfaces;\n    state_interfaces.reserve(\n      unlisted_interface_descriptions.size() + joint_state_interfaces_.size() +\n      sensor_state_interfaces_.size() + gpio_state_interfaces_.size());\n\n    for (const auto & description : unlisted_interface_descriptions)\n    {\n      auto name = description.get_name();\n      unlisted_state_interfaces_.insert(std::make_pair(name, description));\n      auto state_interface = std::make_shared<StateInterface>(description);\n      system_states_.insert(std::make_pair(name, state_interface));\n      unlisted_states_.push_back(state_interface);\n      state_interfaces.push_back(std::const_pointer_cast<const StateInterface>(state_interface));\n    }\n\n    for (const auto & [name, descr] : joint_state_interfaces_)\n    {\n      auto state_interface = std::make_shared<StateInterface>(descr);\n      system_states_.insert(std::make_pair(name, state_interface));\n      joint_states_.push_back(state_interface);\n      state_interfaces.push_back(std::const_pointer_cast<const StateInterface>(state_interface));\n    }\n\n    // ì„¼ì„œ ë° GPIO ìƒíƒœ ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€\n    for (const auto & [name, descr] : sensor_state_interfaces_)\n    {\n      auto state_interface = std::make_shared<StateInterface>(descr);\n      system_states_.insert(std::make_pair(name, state_interface));\n      sensor_states_.push_back(state_interface);\n      state_interfaces.push_back(std::const_pointer_cast<const StateInterface>(state_interface));\n    }\n\n    for (const auto & [name, descr] : gpio_state_interfaces_)\n    {\n      auto state_interface = std::make_shared<StateInterface>(descr);\n      system_states_.insert(std::make_pair(name, state_interface));\n      gpio_states_.push_back(state_interface);\n      state_interfaces.push_back(std::const_pointer_cast<const StateInterface>(state_interface));\n    }\n\n    return state_interfaces;\n  }\n\n  // ëª…ë ¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‚´ë³´ë‚´ê¸° ìœ„í•œ ë©”ì†Œë“œ\n  [[deprecated(\n    \"Replaced by vector<CommandInterface::SharedPtr> on_export_command_interfaces() method. \"\n    \"Exporting is \"\n    \"handled \"\n    \"by the Framework.\")]] virtual std::vector<CommandInterface>\n  export_command_interfaces()\n  {\n    return {};\n  }\n\n  virtual std::vector<hardware_interface::InterfaceDescription>\n  export_unlisted_command_interface_descriptions()\n  {\n    return {};\n  }\n\n  std::vector<CommandInterface::SharedPtr> on_export_command_interfaces()\n  {\n    std::vector<hardware_interface::InterfaceDescription> unlisted_interface_descriptions =\n      export_unlisted_command_interface_descriptions();\n\n    std::vector<CommandInterface::SharedPtr> command_interfaces;\n    command_interfaces.reserve(\n      unlisted_interface_descriptions.size() + joint_command_interfaces_.size() +\n      gpio_command_interfaces_.size());\n\n    for (const auto & description : unlisted_interface_descriptions)\n    {\n      auto name = description.get_name();\n      unlisted_command_interfaces_.insert(std::make_pair(name, description));\n      auto command_interface = std::make_shared<CommandInterface>(description);\n      system_commands_.insert(std::make_pair(name, command_interface));\n      unlisted_commands_.push_back(command_interface);\n      command_interfaces.push_back(command_interface);\n    }\n\n    for (const auto & [name, descr] : joint_command_interfaces_)\n    {\n      auto command_interface = std::make_shared<CommandInterface>(descr);\n      system_commands_.insert(std::make_pair(name, command_interface));\n      joint_commands_.push_back(command_interface);\n      command_interfaces.push_back(command_interface);\n    }\n\n    for (const auto & [name, descr] : gpio_command_interfaces_)\n    {\n      auto command_interface = std::make_shared<CommandInterface>(descr);\n      system_commands_.insert(std::make_pair(name, command_interface));\n      gpio_commands_.push_back(command_interface);\n      command_interfaces.push_back(command_interface);\n    }\n    return command_interfaces;\n  }\n\n  // ëª…ë ¹ ëª¨ë“œ ì „í™˜ ì¤€ë¹„ë¥¼ ìœ„í•œ ë©”ì†Œë“œ (ë¹„ì‹¤ì‹œê°„ ì‹¤í–‰)\n  virtual return_type prepare_command_mode_switch(\n    const std::vector<std::string> & /*start_interfaces*/,\n    const std::vector<std::string> & /*stop_interfaces*/)\n  {\n    return return_type::OK;\n  }\n\n  // ëª…ë ¹ ëª¨ë“œ ì „í™˜ì„ ìˆ˜í–‰í•˜ëŠ” ë©”ì†Œë“œ (ì‹¤ì‹œê°„ ì‹¤í–‰)\n  virtual return_type perform_command_mode_switch(\n    const std::vector<std::string> & /*start_interfaces*/,\n    const std::vector<std::string> & /*stop_interfaces*/)\n  {\n    return return_type::OK;\n  }\n\n  // í˜„ì¬ ìƒíƒœ ê°’ì„ ì½ì–´ì˜¤ëŠ” ë©”ì†Œë“œ\n  virtual return_type read(const rclcpp::Time & time, const rclcpp::Duration & period) = 0;\n\n  // í˜„ì¬ ëª…ë ¹ ê°’ì„ ì•¡ì¶”ì—ì´í„°ì— ì“°ëŠ” ë©”ì†Œë“œ\n  virtual return_type write(const rclcpp::Time & time, const rclcpp::Duration & period) = 0;\n\n  // í•˜ë“œì›¨ì–´ ì´ë¦„ì„ ë°˜í™˜\n  virtual std::string get_name() const { return info_.name; }\n\n  // í•˜ë“œì›¨ì–´ ê·¸ë£¹ ì´ë¦„ì„ ë°˜í™˜\n  virtual std::string get_group_name() const { return info_.group; }\n\n  // í•˜ë“œì›¨ì–´ì˜ ë¼ì´í”„ì‚¬ì´í´ ìƒíƒœ ë°˜í™˜\n  const rclcpp_lifecycle::State & get_lifecycle_state() const { return lifecycle_state_; }\n\n  // í•˜ë“œì›¨ì–´ì˜ ë¼ì´í”„ì‚¬ì´í´ ìƒíƒœ ì„¤ì •\n  void set_lifecycle_state(const rclcpp_lifecycle::State & new_state)\n  {\n    lifecycle_state_ = new_state;\n  }\n\n  // íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ ìƒíƒœ ê°’ì„ ì„¤ì •\n  void set_state(const std::string & interface_name, const double & value)\n  {\n    system_states_.at(interface_name)->set_value(value);\n  }\n\n  // íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ ìƒíƒœ ê°’ì„ ë°˜í™˜\n  double get_state(const std::string & interface_name) const\n  {\n    return system_states_.at(interface_name)->get_value();\n  }\n\n  // íŠ¹ì • ëª…ë ¹ ê°’ì„ ì„¤ì •\n  void set_command(const std::string & interface_name, const double & value)\n  {\n    system_commands_.at(interface_name)->set_value(value);\n  }\n\n  // íŠ¹ì • ëª…ë ¹ ê°’ì„ ë°˜í™˜\n  double get_command(const std::string & interface_name) const\n  {\n    return system_commands_.at(interface_name)->get_value();\n  }\n\n  // SystemInterfaceì˜ ë¡œê±° ë°˜í™˜\n  rclcpp::Logger get_logger() const { return system_logger_; }\n\n  // SystemInterfaceì˜ ì‹œê³„ ë°˜í™˜\n  rclcpp::Clock::SharedPtr get_clock() const { return clock_interface_->get_clock(); }\n\n  // SystemInterfaceì˜ í•˜ë“œì›¨ì–´ ì •ë³´ ë°˜í™˜\n  const HardwareInfo & get_hardware_info() const { return info_; }\n\nprotected:\n  // í•˜ë“œì›¨ì–´ ì •ë³´ êµ¬ì¡°ì²´\n  HardwareInfo info_;\n\n  // ìƒíƒœ ì¸í„°í˜ì´ìŠ¤ì™€ ëª…ë ¹ ì¸í„°í˜ì´ìŠ¤ ê´€ë ¨ ì •ë³´ ì €ì¥\n  std::unordered_map<std::string, InterfaceDescription> joint_state_interfaces_;\n  std::unordered_map<std::string, InterfaceDescription> joint_command_interfaces_;\n  std::unordered_map<std::string, InterfaceDescription> sensor_state_interfaces_;\n  std::unordered_map<std::string, InterfaceDescription> gpio_state_interfaces_;\n  std::unordered_map<std::string, InterfaceDescription> gpio_command_interfaces_;\n  std::unordered_map<std::string, InterfaceDescription> unlisted_state_interfaces_;\n  std::unordered_map<std::string, InterfaceDescription> unlisted_command_interfaces_;\n\n  // ë¼ì´í”„ì‚¬ì´í´ ìƒíƒœ\n  rclcpp_lifecycle::State lifecycle_state_;\n\n  // ëª…ë ¹ ë° ìƒíƒœ ì¸í„°í˜ì´ìŠ¤ì˜ í¬ì¸í„° ì €ì¥\n  std::vector<StateInterface::SharedPtr> joint_states_;\n  std::vector<CommandInterface::SharedPtr> joint_commands_;\n  std::vector<StateInterface::SharedPtr> sensor_states_;\n  std::vector<StateInterface::SharedPtr> gpio_states_;\n  std::vector<CommandInterface::SharedPtr> gpio_commands_;\n  std::vector<StateInterface::SharedPtr> unlisted_states_;\n  std::vector<CommandInterface::SharedPtr> unlisted_commands_;\n\nprivate:\n  // ì‹œê³„ ë° ë¡œê±° ê´€ë ¨ ë©¤ë²„ ë³€ìˆ˜\n  rclcpp::node_interfaces::NodeClockInterface::SharedPtr clock_interface_;\n  rclcpp::Logger system_logger_;\n\n  // ìƒíƒœ ë° ëª…ë ¹ ì¸í„°í˜ì´ìŠ¤ì˜ í¬ì¸í„° ë§µ\n  std::unordered_map<std::string, StateInterface::SharedPtr> system_states_;\n  std::unordered_map<std::string, CommandInterface::SharedPtr> system_commands_;\n};\n\n}  // namespace hardware_interface\n#endif  // HARDWARE_INTERFACE__SYSTEM_INTERFACE_HPP_\n\n\n```\n\n\n# ì£¼ìš” ì‚¬í•­\n\nì•„ë˜ì— ë§ì”€ë“œë¦° 11ê°œì˜ íŒë“¤ì´ ì½”ë“œì˜ ì–´ë–¤ ë¶€ë¶„ì— í•´ë‹¹í•˜ëŠ”ì§€ ê°ê°ì— ëŒ€í•´ ì½”ë“œ ìŠ¤ë‹ˆí«ìœ¼ë¡œ ì˜ˆì‹œë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\n### 1. **ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° ì‚¬ìš© (`std::shared_ptr`, `std::unique_ptr`)**\nìŠ¤ë§ˆíŠ¸ í¬ì¸í„°ì¸ `std::shared_ptr`ëŠ” í•˜ë“œì›¨ì–´ ì¸í„°í˜ì´ìŠ¤ì™€ ê´€ë ¨ëœ ìƒíƒœì™€ ëª…ë ¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n```cpp\nstd::vector<StateInterface::ConstSharedPtr> on_export_state_interfaces()\n{\n  auto state_interface = std::make_shared<StateInterface>(description);\n  state_interfaces.push_back(std::const_pointer_cast<const StateInterface>(state_interface));\n}\n```\n\n### 2. **ë³µì‚¬ ìƒì„±ì ì‚­ì œ (`= delete`)**\në³µì‚¬ ìƒì„±ìë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‚­ì œí•˜ì—¬ ê°ì²´ê°€ ë³µì‚¬ë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.\n```cpp\nSystemInterface(const SystemInterface & other) = delete;\n```\n\n### 3. **ì´ë™ ìƒì„±ì (`= default`)**\nì´ë™ ìƒì„±ìë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ê°ì²´ ì´ë™ì„ í—ˆìš©í•˜ì§€ë§Œ ë³µì‚¬ëŠ” ë°©ì§€í•©ë‹ˆë‹¤.\n```cpp\nSystemInterface(SystemInterface && other) = default;\n```\n\n### 4. **`virtual` í‚¤ì›Œë“œì™€ ê°€ìƒ í•¨ìˆ˜**\n`virtual` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ì¬ì •ì˜ ê°€ëŠ¥í•œ ë©”ì„œë“œë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\n```cpp\nvirtual CallbackReturn on_init(const HardwareInfo & hardware_info)\n{\n  // ì´ˆê¸°í™” ë¡œì§\n}\n```\në˜í•œ ê°€ìƒ ì†Œë©¸ìë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì†ëœ í´ë˜ìŠ¤ì—ì„œë„ ì˜¬ë°”ë¥´ê²Œ ì†Œë©¸ìë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\n```cpp\nvirtual ~SystemInterface() = default;\n```\n\n### 5. **`[[deprecated]]` ì†ì„±**\níŠ¹ì • ë©”ì„œë“œë¥¼ ë” ì´ìƒ ê¶Œì¥ë˜ì§€ ì•ŠìŒì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ `[[deprecated]]` ì†ì„±ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n```cpp\n[[deprecated(\n  \"Replaced by vector<StateInterface::ConstSharedPtr> on_export_state_interfaces() method. \"\n  \"Exporting is handled by the Framework.\")]] \nvirtual std::vector<StateInterface> export_state_interfaces()\n{\n  return {};\n}\n```\n\n### 6. **C++11ì˜ `override` í‚¤ì›Œë“œ**\ní•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ê¸°ë³¸ í´ë˜ìŠ¤ì˜ ê°€ìƒ í•¨ìˆ˜ë¥¼ ì¬ì •ì˜í•  ë•Œ `override` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¬ì •ì˜ë¥¼ ëª…í™•íˆ í•©ë‹ˆë‹¤. (ì´ ì½”ë“œì—ì„œëŠ” `override`ëŠ” ì—†ì§€ë§Œ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì€ ë°©ë²•ì…ë‹ˆë‹¤.)\n\n```cpp\nvirtual CallbackReturn read(const rclcpp::Time & time, const rclcpp::Duration & period) override;\n```\n\n### 7. **`const`ì™€ `&`ì˜ ì‚¬ìš©**\nê°ì²´ì˜ ë©¤ë²„ë¥¼ ë³€ê²½í•˜ì§€ ì•Šë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ `const`ë¥¼ ì‚¬ìš©í•˜ê³ , ì°¸ì¡°ë¡œ ì „ë‹¬í•˜ì—¬ ë³µì‚¬ ë¹„ìš©ì„ ì¤„ì…ë‹ˆë‹¤.\n```cpp\nvirtual std::string get_name() const { return info_.name; }\n\ndouble get_state(const std::string & interface_name) const\n{\n  return system_states_.at(interface_name)->get_value();\n}\n```\n\n### 8. **ì–¸ì–´ í™•ì¥ ì†ì„± (`[[nodiscard]]`, `[[deprecated]]` ë“±)**\nì´ ì½”ë“œì—ì„œëŠ” `[[deprecated]]`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì„œë“œê°€ ë” ì´ìƒ ê¶Œì¥ë˜ì§€ ì•ŠìŒì„ ë‚˜íƒ€ë‚´ê³  ìˆìŠµë‹ˆë‹¤.\n```cpp\n[[deprecated(\n  \"Replaced by vector<StateInterface::ConstSharedPtr> on_export_state_interfaces() method. \"\n  \"Exporting is handled by the Framework.\")]]\nvirtual std::vector<StateInterface> export_state_interfaces()\n{\n  return {};\n}\n```\n\n### 9. **ë‹¤ì¤‘ ë°˜í™˜ ë°©ì‹ (CallbackReturn)**\n`CallbackReturn` íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ê°€ ì—¬ëŸ¬ ê°€ì§€ ê²°ê³¼ ìƒíƒœë¥¼ ë°˜í™˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.\n```cpp\nCallbackReturn init(\n  const HardwareInfo & hardware_info, rclcpp::Logger logger,\n  rclcpp::node_interfaces::NodeClockInterface::SharedPtr clock_interface)\n{\n  return CallbackReturn::SUCCESS;\n}\n```\n\n### 10. **`std::unordered_map`ì˜ ì‚¬ìš©**\nì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `std::unordered_map`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n```cpp\nstd::unordered_map<std::string, InterfaceDescription> joint_state_interfaces_;\nstd::unordered_map<std::string, CommandInterface::SharedPtr> system_commands_;\n```\n\n### 11. **ì½”ë”© ìŠ¤íƒ€ì¼ íŒ**\nì ‘ê·¼ ì œí•œì(`public`, `protected`, `private`)ë¥¼ ëª…í™•íˆ êµ¬ë¶„í•˜ì—¬ ê° ë ˆë²¨ì˜ ì ‘ê·¼ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.\n```cpp\npublic:\n  SystemInterface();\n  virtual ~SystemInterface();\n\nprotected:\n  HardwareInfo info_;\n  rclcpp_lifecycle::State lifecycle_state_;\n\nprivate:\n  rclcpp::node_interfaces::NodeClockInterface::SharedPtr clock_interface_;\n  rclcpp::Logger system_logger_;\n```\në˜í•œ í•¨ìˆ˜ì˜ ì—­í• ê³¼ ë°˜í™˜ ê°’ì„ ì„¤ëª…í•˜ëŠ” ì£¼ì„ì„ ì¶©ë¶„íˆ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n```cpp\n/// í•˜ë“œì›¨ì–´ ì¸í„°í˜ì´ìŠ¤ì˜ ì´ë¦„ì„ ë°˜í™˜í•˜ëŠ” ë©”ì†Œë“œ\n/**\n * \\return í•˜ë“œì›¨ì–´ì˜ ì´ë¦„ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\n */\nvirtual std::string get_name() const { return info_.name; }\n```\n\nì´ì™€ ê°™ì€ ì½”ë”© íŒê³¼ C++ì˜ íŠ¹ë³„í•œ ë¬¸ë²•ì„ í™œìš©í•˜ë©´ ì½”ë“œì˜ ì•ˆì „ì„±, ìœ ì§€ë³´ìˆ˜ì„±, ê·¸ë¦¬ê³  ê°€ë…ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n---\n\n**Reference**\n\n- [Quarto Homepage](https://quarto.org/)\n- [Hypothesis](https://web.hypothes.is/)\n\n",
    "supporting": [
      "2024-11-25-ros2_files"
    ],
    "filters": [],
    "includes": {}
  }
}