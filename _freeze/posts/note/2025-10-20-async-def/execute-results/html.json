{
  "hash": "2060dab0881ecfd6819e73267d1d1d22",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"ğŸ“Async vs Sync in Python\"\njupyter: python3\ntoc: true\ndate: \"2025-10-20\"\ndescription: Async defì— ëŒ€í•´ ì•Œì•„ë³´ê¸°\ncategories: [python, async, 2025]\nformat: html\nexecute:\n  echo: true\n  warning: true\n---\n\n`async def`ì™€ `def`ì˜ ì°¨ì´ëŠ” **í•¨ìˆ˜ì˜ ì‹¤í–‰ ë°©ì‹(ë™ê¸° vs ë¹„ë™ê¸°)**ì— ìˆì–´ìš”.\n\n## ğŸ§© 1. ê¸°ë³¸ ê°œë…\n\n| êµ¬ë¶„ | `def` (ì¼ë°˜ í•¨ìˆ˜) | `async def` (ë¹„ë™ê¸° í•¨ìˆ˜) |\n|---|---|---|\n| ì‹¤í–‰ ë°©ì‹ | **ë™ê¸°(Synchronous)** | **ë¹„ë™ê¸°(Asynchronous)** |\n| ë°˜í™˜ ê°’ | ì¼ë°˜ì ì¸ ê°’ (ì˜ˆ: `int`, `list`) | **ì½”ë£¨í‹´ ê°ì²´ (`coroutine`)** |\n| ì‹¤í–‰ ì‹œì  | ì¦‰ì‹œ ì‹¤í–‰ë˜ì–´ ê²°ê³¼ë¥¼ ë°˜í™˜ | ì‹¤í–‰ë˜ì§€ë§Œ **`await`ë¡œ ê¸°ë‹¤ë ¤ì•¼** ì‹¤ì œ ê²°ê³¼ë¥¼ ì–»ìŒ |\n\n---\n\n## âš™ï¸ 2. ì˜ˆì‹œ ë¹„êµ\n\n### (1) ì¼ë°˜ í•¨ìˆ˜ (`def`)\n\n::: {#51cf7d94 .cell execution_count=1}\n````` {.python .cell-code}\ndef greet():\n    return \"Hello\"\n\nresult = greet()\nprint(result)\n````\n\nğŸ“Œ ì‹¤í–‰ ê²°ê³¼\n\n```bash\nHello\n`````\n:::\n\n\n> `def`ëŠ” í˜¸ì¶œë˜ë©´ ë°”ë¡œ ì‹¤í–‰ë˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•´ìš”.\n\n\n### (2) ë¹„ë™ê¸° í•¨ìˆ˜ (`async def`)\n\n::: {#ef554ce7 .cell execution_count=2}\n``` {.python .cell-code}\nimport asyncio\n\nasync def greet():\n    return \"Hello\"\n\nresult = greet()\nprint(result)\n```\n:::\n\n\nğŸ“Œ ì‹¤í–‰ ê²°ê³¼\n\n```bash\n<coroutine object greet at 0x7f...>\n```\n\n> `async def`ë¡œ ì •ì˜ëœ í•¨ìˆ˜ëŠ” **ì¦‰ì‹œ ì‹¤í–‰ë˜ì§€ ì•Šì•„ìš”.**\n> ëŒ€ì‹  â€œì½”ë£¨í‹´(coroutine)â€ ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\n> ì‹¤ì œ ì‹¤í–‰í•˜ë ¤ë©´ `await` ë˜ëŠ” `asyncio.run()`ì„ ì¨ì•¼ í•´ìš”.\n\n---\n\n### (3) `await`ë¡œ ì‹¤í–‰í•˜ê¸°\n\n::: {#fa6945bc .cell execution_count=3}\n``` {.python .cell-code}\nimport asyncio\n\nasync def greet():\n    return \"Hello\"\n\nasync def main():\n    result = await greet()\n    print(result)\n\nasyncio.run(main())\n```\n:::\n\n\nğŸ“Œ ì‹¤í–‰ ê²°ê³¼\n\n```\nHello\n```\n\n---\n\n## â±ï¸ 3. ì–¸ì œ `async def`ë¥¼ ì¨ì•¼ í• ê¹Œ?\n\në¹„ë™ê¸°ëŠ” **I/O ì‘ì—…(ì…ì¶œë ¥)**ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ìƒí™©ì—ì„œ ìœ ìš©í•©ë‹ˆë‹¤.\n\nì˜ˆ:\n\n* ë„¤íŠ¸ì›Œí¬ ìš”ì²­ (`HTTP request`)\n* íŒŒì¼ ì½ê¸°/ì“°ê¸°\n* ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬\n* ëŒ€ê¸° ì‹œê°„(`sleep`)ì´ ë§ì€ ì½”ë“œ\n\n::: {#2cda39ba .cell execution_count=4}\n``` {.python .cell-code}\nimport asyncio\n\nasync def download():\n    print(\"ë‹¤ìš´ë¡œë“œ ì‹œì‘\")\n    await asyncio.sleep(2)   # ë„¤íŠ¸ì›Œí¬ ëŒ€ê¸°\n    print(\"ë‹¤ìš´ë¡œë“œ ì™„ë£Œ\")\n\nasync def main():\n    await asyncio.gather(download(), download(), download())\n\nasyncio.run(main())\n```\n:::\n\n\nğŸ“Œ ì‹¤í–‰ ê²°ê³¼\n\n```\në‹¤ìš´ë¡œë“œ ì‹œì‘\në‹¤ìš´ë¡œë“œ ì‹œì‘\në‹¤ìš´ë¡œë“œ ì‹œì‘\n(2ì´ˆ í›„)\në‹¤ìš´ë¡œë“œ ì™„ë£Œ\në‹¤ìš´ë¡œë“œ ì™„ë£Œ\në‹¤ìš´ë¡œë“œ ì™„ë£Œ\n```\n\n> ì„¸ ê°œê°€ ë™ì‹œì— ì‹¤í–‰ë˜ì–´ **ì´ 2ì´ˆë§Œ ê±¸ë ¤ìš”!**\n> ë§Œì•½ `def`ì˜€ë‹¤ë©´ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ì–´ 6ì´ˆê°€ ê±¸ë ¸ì„ ê²ë‹ˆë‹¤.\n\n---\n\n## ğŸ§  ìš”ì•½\n\n| í•­ëª©    | `def`        | `async def`                  |\n| ----- | ------------ | ---------------------------- |\n| ì‹¤í–‰ ì‹œì  | ì¦‰ì‹œ ì‹¤í–‰        | ì½”ë£¨í‹´ ê°ì²´ ë°˜í™˜                    |\n| ë°˜í™˜ ê°’  | ì¼ë°˜ ê°’         | `coroutine`                  |\n| ê²°ê³¼ ë°›ê¸° | ë°”ë¡œ ê°€ëŠ¥        | `await` í•„ìš”                   |\n| ì£¼ ìš©ë„  | CPU ì—°ì‚° ì¤‘ì‹¬ ì½”ë“œ | I/O ì¤‘ì‹¬(ëŒ€ê¸° ë§ì€) ì½”ë“œ             |\n| ë³‘ë ¬ ì²˜ë¦¬ | ì–´ë µë‹¤          | `asyncio.gather()` ë“±ìœ¼ë¡œ ì‰½ê²Œ ê°€ëŠ¥ |\n\n---\n\n<!--\nì´ì œë¶€í„°ëŠ” **ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ë°ëª¨**ë¥¼ ë³´ì—¬ì¤„ê²Œìš”.\nQuarto/Jupyterì—ì„œì˜ ì´ë²¤íŠ¸ ë£¨í”„ ì¶©ëŒì„ í”¼í•˜ê¸° ìœ„í•´ `nest_asyncio`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n-->\n\n> âœ… ì‹¤í–‰ ì¤€ë¹„ (í•„ìš”ì‹œ ì„¤ì¹˜ â†’ ì ìš©)\n\n::: {#77055c2a .cell execution_count=5}\n``` {.python .cell-code}\nimport sys, subprocess, importlib\n\ndef ensure(pkg: str):\n    try:\n        importlib.import_module(pkg)\n    except ImportError:\n        subprocess.check_call([sys.executable, \"-m\", \"pip\", \"install\", pkg])\n\nensure(\"nest_asyncio\")\n```\n:::\n\n\n## ğŸš€ ë™ê¸° vs ë¹„ë™ê¸° ì‹¤í–‰ ë°ëª¨\n\n::: {#18c2144d .cell execution_count=6}\n``` {.python .cell-code}\nimport asyncio\nimport time\nimport nest_asyncio\n\n# Jupyter/Quarto ì´ë²¤íŠ¸ ë£¨í”„ ì¤‘ì²© í—ˆìš©\nnest_asyncio.apply()\n\n# ------------------ ë™ê¸° (def) ------------------\ndef sync_task(name):\n    print(f\"{name} ì‹œì‘\")\n    time.sleep(2)\n    print(f\"{name} ì™„ë£Œ\")\n\ndef sync_main():\n    start = time.time()\n    for i in range(3):\n        sync_task(f\"ì‘ì—… {i+1}\")\n    print(f\"ì´ ì†Œìš” ì‹œê°„(ë™ê¸°): {time.time() - start:.2f}ì´ˆ\")\n\n# ------------------ ë¹„ë™ê¸° (async def) ------------------\nasync def async_task(name):\n    print(f\"{name} ì‹œì‘\")\n    await asyncio.sleep(2)\n    print(f\"{name} ì™„ë£Œ\")\n\nasync def async_main():\n    start = time.time()\n    await asyncio.gather(*[async_task(f\"ì‘ì—… {i+1}\") for i in range(3)])\n    print(f\"ì´ ì†Œìš” ì‹œê°„(ë¹„ë™ê¸°): {time.time() - start:.2f}ì´ˆ\")\n\nprint(\"\\n=== ë™ê¸° ì‹¤í–‰ ===\")\nsync_main()\n\nprint(\"\\n=== ë¹„ë™ê¸° ì‹¤í–‰ ===\")\n# ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ ë£¨í”„ì—ì„œ ì•ˆì „í•˜ê²Œ ì‹¤í–‰ (top-level await)\nawait async_main()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n=== ë™ê¸° ì‹¤í–‰ ===\nì‘ì—… 1 ì‹œì‘\nì‘ì—… 1 ì™„ë£Œ\nì‘ì—… 2 ì‹œì‘\nì‘ì—… 2 ì™„ë£Œ\nì‘ì—… 3 ì‹œì‘\nì‘ì—… 3 ì™„ë£Œ\nì´ ì†Œìš” ì‹œê°„(ë™ê¸°): 6.00ì´ˆ\n\n=== ë¹„ë™ê¸° ì‹¤í–‰ ===\nì‘ì—… 1 ì‹œì‘\nì‘ì—… 2 ì‹œì‘\nì‘ì—… 3 ì‹œì‘\nì‘ì—… 1 ì™„ë£Œ\nì‘ì—… 2 ì™„ë£Œ\nì‘ì—… 3 ì™„ë£Œ\nì´ ì†Œìš” ì‹œê°„(ë¹„ë™ê¸°): 2.00ì´ˆ\n```\n:::\n:::\n\n\n## ğŸ” ê²°ê³¼ í•´ì„\n\n* **ë™ê¸°(`def`)**: 1â†’2â†’3 ìˆœì°¨ ì‹¤í–‰ â†’ ì•½ **6ì´ˆ**\n* **ë¹„ë™ê¸°(`async def`)**: 3ê°œ ë™ì‹œ ì‹¤í–‰ â†’ ì•½ **2ì´ˆ**\n\në¹„ë™ê¸°ëŠ” **ëŒ€ê¸°(I/O)** ì‹œê°„ì´ ë§ì€ ì‘ì—…ì—ì„œ í° ì´ì ì„ ì œê³µí•©ë‹ˆë‹¤.\n\n",
    "supporting": [
      "2025-10-20-async-def_files"
    ],
    "filters": [],
    "includes": {}
  }
}